/*!
 * Brav1Toolbox.js - common utility scripts and polyfills
 * http://marcolago.com/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Brav1Toolbox=(function(){var d=["","-webkit-","-moz-","-ms-","-o-"];var i;if(window.getComputedStyle){i=window.getComputedStyle(document.body)}else{i=document.documentElement.style}function k(m,o,n,l){if(m.addEventListener){m.addEventListener(o,n,l)}else{if(m.attachEvent){m.attachEvent(o,n)}}}function g(l){return j(l)!=""}function j(o){for(var l=0;l<d.length;l++){var n=d[l].replace(/-/g,"");var m=o;if(n.length>0){m=m.charAt(0).toUpperCase()+m.substr(1)}m=n+m;if(m in i==true){return m}}return""}function e(l){return !!l&&Object.prototype.toString.call(l).match(/(\w+)\]/)[1]}function h(m,n){if(m.classList){m.classList.add(n)}else{if(f(m,n)==false){var l=m.className;if(l.length>0){l+=" "}m.className=l+n}}}function a(m,n){if(m.classList){m.classList.remove(n)}else{var l=m.className;if(l.indexOf(n)!=-1){if(l.indexOf(" "+n)!=-1){l=l.replace(" "+n,"")}else{if(l.indexOf(n+" ")!=-1){l=l.replace(n+" ","")}else{l=l.replace(n,"")}}}m.className=l}}function f(l,m){if(l.classList){return l.classList.contains(m)}else{return l.className.indexOf(m)!=-1}}function c(l,o){if(document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent(l,true,true);for(var m in o){n[m]=o[m]}document.dispatchEvent(n)}}function b(m,l){var o;var n;o=l.x-m.x;o*=o;n=l.y-m.y;n*=n;return Math.abs(Math.sqrt(o+n))}return{addListener:k,dispatchEvent:c,testCSS:g,getPrefixed:j,typeOf:e,addClass:h,removeClass:a,hasClass:f,distance:b}})();
/*!
 * Flowtime.js
 * http://marcolago.com/flowtime-js/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Flowtime=(function(){var h="ontouchstart" in document.documentElement;var am=window.history.pushState;var f="ft-section";var av="."+f;var ao="ft-page";var an="."+ao;var ak="ft-fragment";var t="."+ak;var V="revealed";var ad="revealed-temp";var X="ft-default-progress";var G="."+X;var Q="ft-section-thumb";var z="."+Q;var g="ft-page-thumb";var L="."+g;var o="flowtimenavigation";var C=document.querySelector(".flowtime");var p=document.querySelector("body");var ag=false;var R="";var w={section:0,page:0};var A=false;var aj=document.title;var H;var ap=22;var af=null;var q=false;var l=true;var v=false;var F=false;var ab=false;var ay=false;var ai=false;var B=true;try{var i=document.querySelector("html").className.toLowerCase();if(i.indexOf("ie7")!=-1||i.indexOf("ie8")!=-1||i.indexOf("lt-ie9")!=-1){B=false}}catch(P){B=false}if(B){Brav1Toolbox.addClass(p,"ft-absolute-nav")}var s=(function(){var bi;var aT;var a1;var be;var aY;var a7=[];var a6=0;var bu=0;var bf=0;var bo=0;var aX=0;var bp=0;var aQ=0;var ba;function aI(){aT=[];be=document.querySelectorAll(t);aY=[];bi=C.querySelectorAll(".flowtime > "+av);a1=C.querySelectorAll(".flowtime "+an);for(var bx=0;bx<bi.length;bx++){var bv=[];var bB=bi[bx];aY[bx]=[];a7[bx]=[];if(bB.getAttribute("data-id")){bB.setAttribute("data-id","__"+bB.getAttribute("data-id"))}bB.setAttribute("data-prog","__"+(bx+1));bB.index=bx;bB.setAttribute("id","");pages=bB.querySelectorAll(an);bf+=pages.length;bu=Math.max(bu,pages.length);for(var by=0;by<pages.length;by++){var bw=pages[by];if(bw.getAttribute("data-id")){bw.setAttribute("data-id","__"+bw.getAttribute("data-id"))}bw.setAttribute("data-prog","__"+(by+1));bw.index=by;bw.setAttribute("id","");if(!bw.getAttribute("data-title")){var bA=bw.querySelector("h1");if(bA!=null&&bA.textContent.lenght!=""){bw.setAttribute("data-title",bA.textContent)}}bv.push(bw);var bz=bw.querySelectorAll(t);aY[bx][by]=bz;a7[bx][by]=-1}aT.push(bv)}a6=bi.length;S();aR()}function aR(){for(var bw=0;bw<a1.length;bw++){var bv=a1[bw];bv.x=bv.offsetLeft+bv.parentNode.offsetLeft;bv.y=bv.offsetTop+bv.parentNode.offsetTop}}function aM(by,bx,bz){var bw=aX;var bv=by==!F;if(bx==true&&aY[bo][aX].length>0&&a7[bo][aX]<aY[bo][aX].length-1&&bv!=true&&bz==false){aU(bo,aX)}else{bw=0;if(bv==true&&bo+1<aT.length-1){bw=0}else{if(bv!=true||l==true||bo+1>aT.length-1){bw=aX}}bo=Math.min(bo+1,aT.length-1);return bd(aT[bo],bw,bz)}return bj(aT[bo][aX],bz)}function bh(by,bx,bz){var bw=aX;var bv=by==!F;if(bx==true&&aY[bo][aX].length>0&&a7[bo][aX]>=0&&bv!=true&&bz==false){bq(bo,aX)}else{var bw=0;bw=0;if(bv==true&&bo-1>=0){bw=0}else{if(bv!=true||l==true||bo-1<0){bw=aX}}bo=Math.max(bo-1,0);return bd(aT[bo],bw,bz)}return bj(aT[bo][aX],bz)}function bd(bz,bw,by){var bx=bz[bw];if(bx==undefined){for(var bv=bw;bv>=0;bv--){if(bz[bv]!=undefined){bx=bz[bv];bw=bv;break}}}aX=bw;if(!A){a8()}return bj(bx,by)}function aH(bv,bw){if(aY[bo][aX].length>0&&a7[bo][aX]<aY[bo][aX].length-1&&bv!=true&&bw==false){aU(bo,aX)}else{if(aT[bo][aX+1]==undefined&&aT[bo+1]!=undefined){bo+=1;aX=0}else{aX=Math.min(aX+1,aT[bo].length-1)}}return bj(aT[bo][aX],bw)}function br(bv,bw){if(aY[bo][aX].length>0&&a7[bo][aX]>=0&&bv!=true&&bw==false){bq(bo,aX)}else{if(aX==0&&aT[bo-1]!=undefined){bo-=1;aX=aT[bo].length-1}else{aX=Math.max(aX-1,0)}}return bj(aT[bo][aX],bw)}function bj(bv,bw){if(bw==true){aJ(bv);return}else{return bv}}function aU(bv,bw,bx){if(bx!=undefined){a7[bv][bw]=bx}else{bx=a7[bv][bw]+=1}Brav1Toolbox.addClass(aY[bv][bw][bx],V)}function bq(bv,bw,bx){if(bx!=undefined){a7[bv][bw]=bx}else{bx=a7[bv][bw]}Brav1Toolbox.removeClass(aY[bv][bw][bx],V);Brav1Toolbox.removeClass(aY[bv][bw][bx],ad);a7[bv][bw]-=1}function aO(){for(var bv=0;bv<be.length;bv++){Brav1Toolbox.addClass(be[bv],ad)}}function a0(){for(var bv=0;bv<be.length;bv++){Brav1Toolbox.removeClass(be[bv],ad)}}function a8(){for(var bz=0;bz<aY.length;bz++){var bw=aY[bz];for(var bx=0;bx<bw.length;bx++){var bv=bw[bx];if(bv.length>0){if(bz>bo){for(var by=bv.length-1;by>=0;by--){bq(bz,bx,by)}}else{if(bz<bo){for(var by=0;by<bv.length;by++){aU(bz,bx,by)}}else{if(bz==bo){if(bx>aX){for(var by=bv.length-1;by>=0;by--){bq(bz,bx,by)}}else{if(bx<aX){for(var by=0;by<bv.length;by++){aU(bz,bx,by)}}else{if(bx==aX){for(var by=0;by<bv.length;by++){if(l==false){bq(bz,bx,by)}else{if(w.section>s.getPageIndex().section||w.page>s.getPageIndex().page){aU(bz,bx,by)}else{bq(bz,bx,by)}}}if(l==false){a7[bz][bx]=-1}else{if(w.section>s.getPageIndex().section||w.page>s.getPageIndex().page){a7[bz][bx]=by-1}else{a7[bz][bx]=-1}}}}}}}}}}}}function aW(bv){if(bv){}return bo}function aG(bv){if(bv){}return aX}function bm(){return bi}function a2(bv){return aT[bv]}function a4(){return a1}function bt(){return a6}function a9(){return bu}function a5(){return bf}function bg(bx){var bw=bo;var bv=aX;if(bx!=undefined){bw=bx.parentNode.index;bv=bx.index}return{section:bw,page:bv}}function bn(bv){return bi[bv]}function aZ(bv,bw){return aT[bw][bv]}function aP(){return bi[bo]}function bk(){return aT[bo][aX]}function bc(){return aY[bo][aX][e()]}function e(){return a7[bo][aX]}function a3(){return bo<bi.length-1}function aN(){return bo>0}function aS(){return aX<aT[bo].length-1}function aL(){return aX>0}function bb(){if(bo==0&&aX==0){return 0}var bw=0;for(var bv=0;bv<bo;bv++){bw+=aT[bv].length}bw+=aT[bo][aX].index+1;return bw}function bl(by){if(by!=undefined){aX=bg(by).page;bo=bg(by).section}var bx="";var bv=bi[bo];bx+=c(bv);if(aT[bo].length>1){var bw=aT[bo][aX];bx+="/"+c(bw)}return bx}function aK(bz){var bA=az(bz);if(bA){var bw=bA.parentNode;for(var bv=0;bv<aT.length;bv++){var by=aT[bv];if(bi[bv]===bw){bo=bv;for(var bx=0;bx<by.length;bx++){if(by[bx]===bA){aX=bx;break}}}}a8()}return bA}function aJ(bA,bv){for(var bw=0;bw<aT.length;bw++){var by=aT[bw];for(var bx=0;bx<by.length;bx++){var bz=aT[bw][bx];if(bz!==bA){Brav1Toolbox.removeClass(bz,"hilite");if(A==false&&bz!==bk()){Brav1Toolbox.removeClass(bz,"actual")}}}}Brav1Toolbox.addClass(bA,"hilite");if(bv){bs(bA)}ba=bA}function aV(){return ba}function bs(bv){Brav1Toolbox.addClass(bv,"actual")}aI();return{update:aI,updateFragments:a8,showFragments:aO,hideFragments:a0,getSection:aW,getPage:aG,getSections:bm,getPages:a2,getAllPages:a4,getNextSection:aM,getPrevSection:bh,getNextPage:aH,getPrevPage:br,getSectionsLength:bt,getPagesLength:a9,getPagesTotalLength:a5,getPageIndex:bg,getSectionByIndex:bn,getPageByIndex:aZ,getCurrentSection:aP,getCurrentPage:bk,getCurrentFragment:bc,getCurrentFragmentIndex:e,getProgress:bb,getHash:bl,setPage:aK,switchActivePage:aJ,getCurrentHilited:aV,hasNextSection:a3,hasPrevSection:aN,hasNextPage:aS,hasPrevPage:aL,updateOffsets:aR}})();if(B){Brav1Toolbox.addListener(document,"click",aF,false)}function aF(aL){var aH=aL.target.getAttribute("href");if(aH&&aH.substr(0,1)=="#"){aL.target.blur();aL.preventDefault();var aK=aH;var aI=s.setPage(aK);N(aI,true,true)}if(A&&Brav1Toolbox.hasClass(aL.target,ao)){N(aL.target,null,true)}if(Brav1Toolbox.hasClass(aL.target,g)){var aJ=Number(y(aL.target.getAttribute("data-p")));var aG=Number(y(aL.target.getAttribute("data-sp")));ah(aJ,aG)}}if(ag==false&&window.history.pushState){window.onpopstate=u}else{ag=true}function u(aI){ag=false;var aH;if(aI.state){aH=aI.state.token.replace("#/","")}else{aH=document.location.hash.replace("#/","")}var aG=s.setPage(aH);N(aG,false)}Brav1Toolbox.addListener(window,"hashchange",D);function D(aI,aJ){if(ag||aJ){var aH=document.location.hash.replace("#/","");var aG=s.setPage(aH);N(aG,false)}}var I=true;Brav1Toolbox.addListener(window,"scroll",d);function d(aK){if(!h){aK.preventDefault();S()}else{if(h){if(I==true){var aM={x:window.pageXOffset,y:window.pageYOffset};var aI;var aL;var aH=s.getAllPages();for(var aJ=0;aJ<aH.length;aJ++){var aG={x:aH[aJ].x,y:aH[aJ].y};if(aJ==0){aI=aH[aJ];aL=Brav1Toolbox.distance(aM,aG)}else{if(Brav1Toolbox.distance(aM,aG)<aL){aI=aH[aJ];aL=Brav1Toolbox.distance(aM,aG)}}}I=false;window.scrollTo(aI.x,aI.y)}else{I=true}}}}var at=(function j(){var aI=NaN;function aH(){e();if(!A){aI=setTimeout(aG,300)}}function e(){clearTimeout(aI)}function aG(){s.updateOffsets();N()}Brav1Toolbox.addListener(window,"resize",aH);return{enable:aH,disable:e,}})();function az(aG){if(aG.length>0){var e=aG.replace("#/","").split("/");var aI=document.querySelector(av+"[data-id=__"+e[0]+"]")||document.querySelector(av+"[data-prog=__"+e[0]+"]");if(aI!=null){var aH=null;if(e.length>1){aH=aI.querySelector(an+"[data-id=__"+e[1]+"]")||aI.querySelector(an+"[data-prog=__"+e[1]+"]")}if(aH==null){aH=aI.querySelector(an)}return aH}}return}function ar(){s.update();D(null,true)}function aB(aJ){var aI=aj;var e=s.getCurrentPage().getAttribute("data-title");if(e==null){var aH=aJ.split("/");for(var aG=0;aG<aH.length;aG++){aI+=" | "+aH[aG]}}else{if(s.getCurrentSection().getAttribute("data-title")!=null){aI+=" | "+s.getCurrentSection().getAttribute("data-title")}aI+=" | "+e}document.title=aI}function c(e){return(e.getAttribute("data-id")!=null?e.getAttribute("data-id").replace(/__/,""):e.getAttribute("data-prog").replace(/__/,""))}function aw(e){if(e.substr(0,2)!="__"){return"__"+e}else{return e}}function y(e){if(e.substr(0,2)=="__"){return e.replace(/__/,"")}else{return e}}function N(aJ,aI,aL){aI=aI==false?aI:true;if(!aJ){if(s.getCurrentPage()!=null){aJ=s.getCurrentPage()}else{aJ=document.querySelector(an)}aI=true}aD(aJ);if(A){U(false,false)}var aK=s.getHash(aJ);if(aL==true){s.updateFragments()}var e=s.getPageIndex(aJ);if(w.section!=e.section||w.page!=e.page){if(am!=null&&aI!=false&&s.getCurrentFragmentIndex()==-1){var aH={token:aK};var aG="#/"+aK;R=aG;window.history.pushState(aH,null,R)}else{document.location.hash="/"+aK}}aB(aK);aq();w=e;s.switchActivePage(aJ,true);if(ai){aE()}}function aq(){var e=s.getPageIndex();Brav1Toolbox.dispatchEvent(o,{section:s.getCurrentSection(),page:s.getCurrentPage(),sectionIndex:e.section,pageIndex:e.page,pastSectionIndex:w.section,pastPageIndex:w.page,prevSection:s.hasPrevSection(),nextSection:s.hasNextSection(),prevPage:s.hasPrevPage(),nextPage:s.hasNextPage(),fragment:s.getCurrentFragment(),fragmentIndex:s.getCurrentFragmentIndex(),isOverview:A,progress:s.getProgress(),total:s.getPagesTotalLength()})}function aD(aH){var aG;var aI;var e=s.getPageIndex(aH);if(v==true){aG=aH.x;aI=aH.y}else{aG=e.section;aI=e.page}if(Brav1Toolbox.testCSS("transform")){if(v){C.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-aG+"px) translateY("+-aI+"px)"}else{C.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-aG*100+"%) translateY("+-aI*100+"%)"}}else{if(v){C.style.top=-aI+"px";C.style.left=-aG+"px"}else{C.style.top=-aI*100+"%";C.style.left=-aG*100+"%"}}S()}function S(){if(!h){window.scrollTo(0,0)}}var af=null;var ac=null;function ax(){var aG=document.createDocumentFragment();af=document.createElement("div");af.className=X;aG.appendChild(af);for(var aI=0;aI<s.getSectionsLength();aI++){var e=document.createElement("div");e.className=Q;var aH=s.getPages(aI);for(var aJ=0;aJ<aH.length;aJ++){var aK=document.createElement("div");aK.className=g;aK.setAttribute("data-p","__"+aI);aK.setAttribute("data-sp","__"+aJ);e.appendChild(aK)}af.appendChild(e)}p.appendChild(af)}function r(){if(af!=null){p.removeChild(af);af=null}}function aE(){if(af!=null){var aI=af.querySelectorAll(L);for(var aH=0;aH<aI.length;aH++){var aJ=aI[aH];var aG=Number(y(aJ.getAttribute("data-p")));var e=Number(y(aJ.getAttribute("data-sp")));if(aG==s.getPageIndex().section&&e==s.getPageIndex().page){Brav1Toolbox.addClass(aI[aH],"actual")}else{Brav1Toolbox.removeClass(aI[aH],"actual")}}}}function U(e,aG){if(A){k(e,aG)}else{H=s.getCurrentPage();M()}}function k(e,aG){A=false;Brav1Toolbox.removeClass(p,"ft-overview");s.hideFragments();aG=aG===false?false:true;if(aG==true){if(e==true){N(H)}else{N()}}}function M(){A=true;Brav1Toolbox.addClass(p,"ft-overview");s.showFragments();if(ab==false){K(true)}else{J(true)}aq()}function K(aI){if(aI){var aH=100/s.getSectionsLength();var aG=100/s.getPagesLength();var aJ=Math.min(aH,aG)*0.9;var e=(100-s.getSectionsLength()*aJ)/2;var aK=(100-s.getPagesLength()*aJ)/2;C.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+aK+"%) scale("+aJ/100+", "+aJ/100+")"}}function J(aG){if(aG){var aI=ap;var aH=s.getPageIndex();var e=50-(aI*aH.section)-(aI/2);var aJ=50-(aI*aH.page)-(aI/2);C.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+aJ+"%) scale("+aI/100+", "+aI/100+")"}}Brav1Toolbox.addListener(window,"keydown",x);Brav1Toolbox.addListener(window,"keyup",ae);function x(aH){var aG=aH.target.tagName;if(aG!="INPUT"&&aG!="TEXTAREA"&&aG!="SELECT"){if(aH.keyCode>=37&&aH.keyCode<=40){aH.preventDefault()}}}function ae(aK){var aI=aK.target.tagName;var aJ;if(aI!="INPUT"&&aI!="TEXTAREA"&&aI!="SELECT"){aK.preventDefault();switch(aK.keyCode){case 27:U(true);break;case 33:var aH=s.getPageIndex();ah(aH.section,0);break;case 34:var aH=s.getPageIndex();ah(aH.section,s.getPages(aH.section).length-1);break;case 35:var aG=s.getSectionsLength()-1;ah(aG,s.getPages(aG).length-1);break;case 36:ah(0,0);break;case 37:b(aK.shiftKey);break;case 39:E(aK.shiftKey);break;case 38:al(aK.shiftKey);break;case 40:T(aK.shiftKey);break;case 13:if(A){ah(s.getCurrentHilited())}break;default:break}}}function E(e){var aG=s.getNextSection(e,q,A);if(aG!=undefined){N(aG)}else{if(A&&ab){M()}}}function b(e){var aG=s.getPrevSection(e,q,A);if(aG!=undefined){N(aG)}else{if(A&&ab){M()}}}function T(e){var aG=s.getNextPage(e,A);if(aG!=undefined){N(aG)}else{if(A&&ab){M()}}}function al(e){var aG=s.getPrevPage(e,A);if(aG!=undefined){N(aG)}else{if(A&&ab){M()}}}function ah(){var aG=ah.arguments;if(aG.length>0){if(aG.length==1){if(Brav1Toolbox.typeOf(aG[0])==="Object"){var aK=aG[0];var aJ=aK.section;var aI=aK.page;if(aJ!=null&&aJ!=undefined){var e=document.querySelector(av+"[data-id="+aw(aJ)+"]");if(aI!=null&&aI!=undefined){var aH=e.querySelector(an+"[data-id="+aw(aI)+"]");if(aH!=null){N(aH);return}}}}else{if(aG[0].nodeName!=undefined){N(aG[0],null,true)}}}else{if(Brav1Toolbox.typeOf(aG[0])==="Number"||aG[0]===0){var aH=s.getPageByIndex(aG[1],aG[0]);N(aH);return}}}}function a(){if(ai&&af==null){ax()}if(document.location.hash.length>0){Brav1Toolbox.addClass(C,"no-transition");D(null,true);Brav1Toolbox.removeClass(C,"no-transition")}else{if(a.arguments.length>0){ah.apply(this,a.arguments)}else{ah(0,0);aE()}}}function aa(e){q=e;W(e)}function W(e){l=e}function aA(e){am=e}function aC(e){v=e;N()}function n(e){F=e}function m(e){F=!e}function O(e){ab=e}function Z(e){ay=e}function au(e){if(h){ai=false}else{ai=e}if(ai){if(af==null){ax()}aE()}else{if(af!=null){r()}}}function Y(aH,aG,e){Brav1Toolbox.addListener(document,aH,aG,e)}return{start:a,updateNavigation:ar,nextSection:E,prevSection:b,next:T,prev:al,nextFragment:T,prevFragment:al,gotoPage:ah,toggleOverview:U,fragmentsOnSide:aa,fragmentsOnBack:W,useHistory:aA,slideInPx:aC,sectionsSlideToTop:n,gridNavigation:m,useOverviewVariant:O,twoStepsSlide:Z,showProgress:au,addEventListener:Y}})();