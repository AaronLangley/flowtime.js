/*!
 * Brav1Toolbox.js - common utility scripts and polyfills
 * http://marcolago.com/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Brav1Toolbox=(function(){var c=["","-webkit-","-moz-","-ms-","-o-"];var h;if(window.getComputedStyle){h=window.getComputedStyle(document.body)}else{h=document.documentElement.style}function j(l,n,m,k){if(l.addEventListener){l.addEventListener(n,m,k)}else{if(l.attachEvent){l.attachEvent(n,m)}}}function f(k){return i(k)!=""}function i(n){for(var k=0;k<c.length;k++){var m=c[k].replace(/-/g,"");var l=n;if(m.length>0){l=l.charAt(0).toUpperCase()+l.substr(1)}l=m+l;if(l in h==true){return l}}return""}function d(k){return !!k&&Object.prototype.toString.call(k).match(/(\w+)\]/)[1]}function g(l,m){if(l.classList){l.classList.add(m)}else{if(e(l,m)==false){var k=l.className;if(k.length>0){k+=" "}l.className=k+m}}}function a(l,m){if(l.classList){l.classList.remove(m)}else{var k=l.className;if(k.indexOf(m)!=-1){if(k.indexOf(" "+m)!=-1){k=k.replace(" "+m,"")}else{if(k.indexOf(m+" ")!=-1){k=k.replace(m+" ","")}else{k=k.replace(m,"")}}}l.className=k}}function e(k,l){if(k.classList){return k.classList.contains(l)}else{return k.className.indexOf(l)!=-1}}function b(k,n){if(document.createEvent){var m=document.createEvent("HTMLEvents");m.initEvent(k,true,true);for(var l in n){m[l]=n[l]}document.dispatchEvent(m)}}return{addListener:j,dispatchEvent:b,testCSS:f,getPrefixed:i,typeOf:d,addClass:g,removeClass:a,hasClass:e}})();
/*!
 * Flowtime.js
 * http://marcolago.com/flowtime-js/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Flowtime=(function(){var h="ontouchstart" in document.documentElement;var al=window.history.pushState;var f="ft-section";var au="."+f;var an="ft-page";var am="."+an;var aj="ft-fragment";var t="."+aj;var U="revealed";var ac="revealed-temp";var W="ft-default-progress";var G="."+W;var P="ft-section-thumb";var z="."+P;var g="ft-page-thumb";var K="."+g;var o="flowtimenavigation";var C=document.querySelector(".flowtime");var p=document.querySelector("body");var af=false;var Q="";var w={section:0,page:0};var A=false;var ai=document.title;var H;var ao=22;var ae=null;var q=false;var l=true;var v=false;var F=false;var aa=false;var ax=false;var ah=false;var B=true;try{var i=document.querySelector("html").className.toLowerCase();if(i.indexOf("ie7")!=-1||i.indexOf("ie8")!=-1||i.indexOf("lt-ie9")!=-1){B=false}}catch(O){B=false}if(B){Brav1Toolbox.addClass(p,"ft-absolute-nav")}if(B){Brav1Toolbox.addListener(document,"click",aE,false)}function aE(aK){var aG=aK.target.getAttribute("href");if(aG&&aG.substr(0,1)=="#"){aK.target.blur();aK.preventDefault();var aJ=aG;var aH=s.setPage(aJ);M(aH,true,true)}if(A&&Brav1Toolbox.hasClass(aK.target,an)){M(aK.target,null,true)}if(Brav1Toolbox.hasClass(aK.target,g)){var aI=Number(y(aK.target.getAttribute("data-p")));var aF=Number(y(aK.target.getAttribute("data-sp")));ag(aI,aF)}}if(af==false&&window.history.pushState){window.onpopstate=u}else{af=true}function u(aH){af=false;var aG;if(aH.state){aG=aH.state.token.replace("#/","")}else{aG=document.location.hash.replace("#/","")}var aF=s.setPage(aG);M(aF,false)}Brav1Toolbox.addListener(window,"hashchange",D);function D(aH,aI){if(af||aI){var aG=document.location.hash.replace("#/","");var aF=s.setPage(aG);M(aF,false)}}Brav1Toolbox.addListener(window,"scroll",d);function d(aF){aF.preventDefault();R()}var ar=(function j(){var aH=NaN;function aG(){e();if(!A){aH=setTimeout(aF,300)}}function e(){clearTimeout(aH)}function aF(){M()}Brav1Toolbox.addListener(window,"resize",aG);return{enable:aG,disable:e,}})();function ay(aF){if(aF.length>0){var e=aF.replace("#/","").split("/");var aH=document.querySelector(au+"[data-id=__"+e[0]+"]")||document.querySelector(au+"[data-prog=__"+e[0]+"]");if(aH!=null){var aG=null;if(e.length>1){aG=aH.querySelector(am+"[data-id=__"+e[1]+"]")||aH.querySelector(am+"[data-prog=__"+e[1]+"]")}if(aG==null){aG=aH.querySelector(am)}return aG}}return}function aq(){s.update();D(null,true)}function aA(aI){var aH=ai;var e=s.getCurrentPage().getAttribute("data-title");if(e==null){var aG=aI.split("/");for(var aF=0;aF<aG.length;aF++){aH+=" | "+aG[aF]}}else{if(s.getCurrentSection().getAttribute("data-title")!=null){aH+=" | "+s.getCurrentSection().getAttribute("data-title")}aH+=" | "+e}document.title=aH}function c(e){return(e.getAttribute("data-id")!=null?e.getAttribute("data-id").replace(/__/,""):e.getAttribute("data-prog").replace(/__/,""))}function av(e){if(e.substr(0,2)!="__"){return"__"+e}else{return e}}function y(e){if(e.substr(0,2)=="__"){return e.replace(/__/,"")}else{return e}}function M(aM,aJ,aF){aJ=aJ==false?aJ:true;if(!aM){if(s.getCurrentPage()!=null){aM=s.getCurrentPage()}else{aM=document.querySelector(am)}aJ=true}var aL;var aK;var aG=s.getPageIndex(aM);if(v==true){aL=aM.offsetLeft+aM.parentNode.offsetLeft;aK=aM.offsetTop+aM.parentNode.offsetTop}else{aL=aG.section;aK=aG.page}aC(aL,aK);if(A){T(false,false)}s.switchActivePage(s.getCurrentPage(),true);var aH=s.getHash(aM);if(aF==true){s.updateFragments()}if(al!=null&&aJ!=false&&s.getCurrentFragmentIndex()==-1){var e={token:aH};var aI="#/"+aH;Q=aI;window.history.pushState(e,null,Q)}else{document.location.hash="/"+aH}aA(aH);ap();w=aG;if(ah){aD()}}function ap(){var e=s.getPageIndex();Brav1Toolbox.dispatchEvent(o,{section:s.getCurrentSection(),page:s.getCurrentPage(),sectionIndex:e.section,pageIndex:e.page,pastSectionIndex:w.section,pastPageIndex:w.page,prevSection:s.hasPrevSection(),nextSection:s.hasNextSection(),prevPage:s.hasPrevPage(),nextPage:s.hasNextPage(),fragment:s.getCurrentFragment(),fragmentIndex:s.getCurrentFragmentIndex(),isOverview:A,progress:s.getProgress(),total:s.getPagesTotalLength()})}function aC(e,aF){if(Brav1Toolbox.testCSS("transform")){if(v){C.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-e+"px) translateY("+-aF+"px)"}else{C.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-e*100+"%) translateY("+-aF*100+"%)"}}else{if(v){C.style.top=-aF+"px";C.style.left=-e+"px"}else{C.style.top=-aF*100+"%";C.style.left=-e*100+"%"}}R()}function R(){window.scrollTo(0,0)}var ae=null;var ab=null;function aw(){var aF=document.createDocumentFragment();ae=document.createElement("div");ae.className=W;aF.appendChild(ae);for(var aH=0;aH<s.getSectionsLength();aH++){var e=document.createElement("div");e.className=P;var aG=s.getPages(aH);for(var aI=0;aI<aG.length;aI++){var aJ=document.createElement("div");aJ.className=g;aJ.setAttribute("data-p","__"+aH);aJ.setAttribute("data-sp","__"+aI);e.appendChild(aJ)}ae.appendChild(e)}p.appendChild(ae)}function r(){if(ae!=null){p.removeChild(ae);ae=null}}function aD(){if(ae!=null){var aH=ae.querySelectorAll(K);for(var aG=0;aG<aH.length;aG++){var aI=aH[aG];var aF=Number(y(aI.getAttribute("data-p")));var e=Number(y(aI.getAttribute("data-sp")));if(aF==s.getPageIndex().section&&e==s.getPageIndex().page){Brav1Toolbox.addClass(aH[aG],"actual")}else{Brav1Toolbox.removeClass(aH[aG],"actual")}}}}function T(e,aF){if(A){k(e,aF)}else{H=s.getCurrentPage();L()}}function k(e,aF){A=false;Brav1Toolbox.removeClass(p,"ft-overview");s.hideFragments();aF=aF===false?false:true;if(aF==true){if(e==true){M(H)}else{M()}}}function L(){A=true;Brav1Toolbox.addClass(p,"ft-overview");s.showFragments();if(aa==false){J(true)}else{I(true)}ap()}function J(aH){if(aH){var aG=100/s.getSectionsLength();var aF=100/s.getPagesLength();var aI=Math.min(aG,aF)*0.9;var e=(100-s.getSectionsLength()*aI)/2;var aJ=(100-s.getPagesLength()*aI)/2;C.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+aJ+"%) scale("+aI/100+", "+aI/100+")"}}function I(aF){if(aF){var aH=ao;var aG=s.getPageIndex();var e=50-(aH*aG.section)-(aH/2);var aI=50-(aH*aG.page)-(aH/2);C.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+aI+"%) scale("+aH/100+", "+aH/100+")"}}Brav1Toolbox.addListener(window,"keydown",x);Brav1Toolbox.addListener(window,"keyup",ad);function x(aG){var aF=aG.target.tagName;if(aF!="INPUT"&&aF!="TEXTAREA"&&aF!="SELECT"){if(aG.keyCode>=37&&aG.keyCode<=40){aG.preventDefault()}}}function ad(aJ){var aH=aJ.target.tagName;var aI;if(aH!="INPUT"&&aH!="TEXTAREA"&&aH!="SELECT"){aJ.preventDefault();switch(aJ.keyCode){case 27:T(true);break;case 33:var aG=s.getPageIndex();ag(aG.section,0);break;case 34:var aG=s.getPageIndex();ag(aG.section,s.getPages(aG.section).length-1);break;case 35:var aF=s.getSectionsLength()-1;ag(aF,s.getPages(aF).length-1);break;case 36:ag(0,0);break;case 37:b(aJ.shiftKey);break;case 39:E(aJ.shiftKey);break;case 38:ak(aJ.shiftKey);break;case 40:S(aJ.shiftKey);break;case 13:if(A){ag(s.getCurrentHilited())}break;default:break}}}function E(e){var aF=s.getNextSection(e,q,A);if(aF!=undefined){M(aF)}else{if(A&&aa){L()}}}function b(e){var aF=s.getPrevSection(e,q,A);if(aF!=undefined){M(aF)}else{if(A&&aa){L()}}}function S(e){var aF=s.getNextPage(e,A);if(aF!=undefined){M(aF)}else{if(A&&aa){L()}}}function ak(e){var aF=s.getPrevPage(e,A);if(aF!=undefined){M(aF)}else{if(A&&aa){L()}}}function ag(){var aF=ag.arguments;if(aF.length>0){if(aF.length==1){if(Brav1Toolbox.typeOf(aF[0])==="Object"){var aJ=aF[0];var aI=aJ.section;var aH=aJ.page;if(aI!=null&&aI!=undefined){var e=document.querySelector(au+"[data-id="+av(aI)+"]");if(aH!=null&&aH!=undefined){var aG=e.querySelector(am+"[data-id="+av(aH)+"]");if(aG!=null){M(aG);return}}}}else{if(aF[0].nodeName!=undefined){M(aF[0],null,true)}}}else{if(Brav1Toolbox.typeOf(aF[0])==="Number"||aF[0]===0){var aG=s.getPageByIndex(aF[1],aF[0]);M(aG);return}}}}var s=(function(){var be;var aR;var ba;var aW;var a3=[];var a2=0;var bq=0;var bb=0;var bj=0;var aV=0;var bk=0;var aP=0;var a6;function aH(){aR=[];ba=document.querySelectorAll(t);aW=[];be=C.querySelectorAll(".flowtime > "+au);for(var bu=0;bu<be.length;bu++){var bs=[];var by=be[bu];aW[bu]=[];a3[bu]=[];if(by.getAttribute("data-id")){by.setAttribute("data-id","__"+by.getAttribute("data-id"))}by.setAttribute("data-prog","__"+(bu+1));by.index=bu;by.setAttribute("id","");var br=by.querySelectorAll(am);bb+=br.length;bq=Math.max(bq,br.length);for(var bv=0;bv<br.length;bv++){var bt=br[bv];if(bt.getAttribute("data-id")){bt.setAttribute("data-id","__"+bt.getAttribute("data-id"))}bt.setAttribute("data-prog","__"+(bv+1));bt.index=bv;bt.setAttribute("id","");if(!bt.getAttribute("data-title")){var bx=bt.querySelector("h1");if(bx!=null&&bx.textContent.lenght!=""){bt.setAttribute("data-title",bx.textContent)}}bs.push(bt);var bw=bt.querySelectorAll(t);aW[bu][bv]=bw;a3[bu][bv]=-1}aR.push(bs)}a2=be.length;R()}function aL(bu,bt,bv){var bs=aV;var br=bu===!F;if(bt==true&&aW[bj][aV].length>0&&a3[bj][aV]<aW[bj][aV].length-1&&br!=true&&bv==false){aS(bj,aV)}else{bs=0;if(br!=true||l==true||bj+1>aR.length-1){bs=aV}bj=Math.min(bj+1,aR.length-1);return a9(aR[bj],bs,bv)}return bf(aR[bj][aV],bv)}function bc(bu,bt,bv){var bs=aV;var br=bu==!F;if(bt==true&&aW[bj][aV].length>0&&a3[bj][aV]>=0&&br!=true&&bv==false){bm(bj,aV)}else{var bs=0;if(br!=true||l==true||bj-1<0){bs=aV}bj=Math.max(bj-1,0);return a9(aR[bj],bs,bv)}return bf(aR[bj][aV],bv)}function a9(bv,bs,bu){var bt=bv[bs];if(bt==undefined){for(var br=bs;br>=0;br--){if(bv[br]!=undefined){bt=bv[br];bs=br;break}}}aV=bs;if(!A){a4()}return bf(bt,bu)}function aG(br,bs){if(aW[bj][aV].length>0&&a3[bj][aV]<aW[bj][aV].length-1&&br!=true&&bs==false){aS(bj,aV)}else{if(aR[bj][aV+1]==undefined&&aR[bj+1]!=undefined){bj+=1;aV=0}else{aV=Math.min(aV+1,aR[bj].length-1)}}return bf(aR[bj][aV],bs)}function bn(br,bs){if(aW[bj][aV].length>0&&a3[bj][aV]>=0&&br!=true&&bs==false){bm(bj,aV)}else{if(aV==0&&aR[bj-1]!=undefined){bj-=1;aV=aR[bj].length-1}else{aV=Math.max(aV-1,0)}}return bf(aR[bj][aV],bs)}function bf(br,bs){if(bs==true){aI(br);return}else{return br}}function aS(br,bs,bt){if(bt!=undefined){a3[br][bs]=bt}else{bt=a3[br][bs]+=1}Brav1Toolbox.addClass(aW[br][bs][bt],U)}function bm(br,bs,bt){if(bt!=undefined){a3[br][bs]=bt}else{bt=a3[br][bs]}Brav1Toolbox.removeClass(aW[br][bs][bt],U);Brav1Toolbox.removeClass(aW[br][bs][bt],ac);a3[br][bs]-=1}function aN(){for(var br=0;br<ba.length;br++){Brav1Toolbox.addClass(ba[br],ac)}}function aY(){for(var br=0;br<ba.length;br++){Brav1Toolbox.removeClass(ba[br],ac)}}function a4(){for(var bv=0;bv<aW.length;bv++){var bs=aW[bv];for(var bt=0;bt<bs.length;bt++){var br=bs[bt];if(br.length>0){if(bv>bj){for(var bu=br.length-1;bu>=0;bu--){bm(bv,bt,bu)}}else{if(bv<bj){for(var bu=0;bu<br.length;bu++){aS(bv,bt,bu)}}else{if(bv==bj){if(bt>aV){for(var bu=br.length-1;bu>=0;bu--){bm(bv,bt,bu)}}else{if(bt<aV){for(var bu=0;bu<br.length;bu++){aS(bv,bt,bu)}}else{if(bt==aV){for(var bu=0;bu<br.length;bu++){if(l==false){bm(bv,bt,bu)}else{if(w.section>s.getPageIndex().section||w.page>s.getPageIndex().page){aS(bv,bt,bu)}else{bm(bv,bt,bu)}}}if(l==false){a3[bv][bt]=-1}else{if(w.section>s.getPageIndex().section||w.page>s.getPageIndex().page){a3[bv][bt]=bu-1}else{a3[bv][bt]=-1}}}}}}}}}}}}function aU(br){if(br){}return bj}function aF(br){if(br){}return aV}function bi(){return be}function aZ(br){return aR[br]}function bp(){return a2}function a5(){return bq}function a1(){return bb}function bd(bt){var bs=bj;var br=aV;if(bt!=undefined){bs=bt.parentNode.index;br=bt.index}return{section:bs,page:br}}function bl(br){return be[br]}function aX(br,bs){return aR[bs][br]}function aO(){return be[bj]}function bg(){return aR[bj][aV]}function a8(){return aW[bj][aV][e()]}function e(){return a3[bj][aV]}function a0(){return bj<be.length-1}function aM(){return bj>0}function aQ(){return aV<aR[bj].length-1}function aK(){return aV>0}function a7(){if(bj==0&&aV==0){return 0}var bs=0;for(var br=0;br<bj;br++){bs+=aR[br].length}bs+=aR[bj][aV].index+1;return bs}function bh(bu){if(bu!=undefined){aV=bd(bu).page;bj=bd(bu).section}var bt="";var br=be[bj];bt+=c(br);if(aR[bj].length>1){var bs=aR[bj][aV];bt+="/"+c(bs)}return bt}function aJ(bv){var bw=ay(bv);if(bw){var bs=bw.parentNode;for(var br=0;br<aR.length;br++){var bu=aR[br];if(be[br]===bs){bj=br;for(var bt=0;bt<bu.length;bt++){if(bu[bt]===bw){aV=bt;break}}}}a4()}return bw}function aI(bw,br){for(var bs=0;bs<aR.length;bs++){var bu=aR[bs];for(var bt=0;bt<bu.length;bt++){var bv=aR[bs][bt];if(bv!==bw){Brav1Toolbox.removeClass(bv,"hilite");if(A==false&&bv!==bg()){Brav1Toolbox.removeClass(bv,"actual")}}}}Brav1Toolbox.addClass(bw,"hilite");if(br){bo(bw)}a6=bw}function aT(){return a6}function bo(br){Brav1Toolbox.addClass(br,"actual")}aH();return{update:aH,updateFragments:a4,showFragments:aN,hideFragments:aY,getSection:aU,getPage:aF,getSections:bi,getPages:aZ,getNextSection:aL,getPrevSection:bc,getNextPage:aG,getPrevPage:bn,getSectionsLength:bp,getPagesLength:a5,getPagesTotalLength:a1,getPageIndex:bd,getSectionByIndex:bl,getPageByIndex:aX,getCurrentSection:aO,getCurrentPage:bg,getCurrentFragment:a8,getCurrentFragmentIndex:e,getProgress:a7,getHash:bh,setPage:aJ,switchActivePage:aI,getCurrentHilited:aT,hasNextSection:a0,hasPrevSection:aM,hasNextPage:aQ,hasPrevPage:aK}})();function a(){if(ah&&ae==null){aw()}if(document.location.hash.length>0){Brav1Toolbox.addClass(C,"no-transition");D(null,true);Brav1Toolbox.removeClass(C,"no-transition")}else{if(a.arguments.length>0){ag.apply(this,a.arguments)}else{ag(0,0);aD()}}}function Z(e){q=e;V(e)}function V(e){l=e}function az(e){al=e}function aB(e){v=e;M()}function n(e){F=e}function m(e){F=!e}function N(e){aa=e}function Y(e){ax=e}function at(e){ah=e;if(ah){if(ae==null){aw()}aD()}else{if(ae!=null){r()}}}function X(aG,aF,e){Brav1Toolbox.addListener(document,aG,aF,e)}return{start:a,updateNavigation:aq,nextSection:E,prevSection:b,next:S,prev:ak,nextFragment:S,prevFragment:ak,gotoPage:ag,toggleOverview:T,fragmentsOnSide:Z,fragmentsOnBack:V,useHistory:az,slideInPx:aB,sectionsSlideToTop:n,gridNavigation:m,useOverviewVariant:N,twoStepsSlide:Y,showProgress:at,addEventListener:X}})();