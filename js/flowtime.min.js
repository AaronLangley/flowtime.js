/*!
 * Brav1Toolbox.js - common utility scripts and polyfills
 * http://marcolago.com/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Brav1Toolbox=(function(){var c=["","-webkit-","-moz-","-ms-","-o-"];var h;if(window.getComputedStyle){h=window.getComputedStyle(document.body)}else{h=document.documentElement.style}function j(l,n,m,k){if(l.addEventListener){l.addEventListener(n,m,k)}else{if(l.attachEvent){l.attachEvent(n,m)}}}function f(k){return i(k)!=""}function i(n){for(var k=0;k<c.length;k++){var m=c[k].replace(/-/g,"");var l=n;if(m.length>0){l=l.charAt(0).toUpperCase()+l.substr(1)}l=m+l;if(l in h==true){return l}}return""}function d(k){return !!k&&Object.prototype.toString.call(k).match(/(\w+)\]/)[1]}function g(l,m){if(l.classList){l.classList.add(m)}else{if(e(l,m)==false){var k=l.className;if(k.length>0){k+=" "}l.className=k+m}}}function a(l,m){if(l.classList){l.classList.remove(m)}else{var k=l.className;if(k.indexOf(m)!=-1){if(k.indexOf(" "+m)!=-1){k=k.replace(" "+m,"")}else{if(k.indexOf(m+" ")!=-1){k=k.replace(m+" ","")}else{k=k.replace(m,"")}}}l.className=k}}function e(k,l){if(k.classList){return k.classList.contains(l)}else{return k.className.indexOf(l)!=-1}}function b(k,n){if(document.createEvent){var m=document.createEvent("HTMLEvents");m.initEvent(k,true,true);for(var l in n){m[l]=n[l]}document.dispatchEvent(m)}}return{addListener:j,dispatchEvent:b,testCSS:f,getPrefixed:i,typeOf:d,addClass:g,removeClass:a,hasClass:e}})();
/*!
 * Flowtime.js
 * http://marcolago.com/flowtime-js/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Flowtime=(function(){var h="ontouchstart" in document.documentElement;var aj=window.history.pushState;var f="ft-section";var aq="."+f;var al="ft-page";var ak="."+al;var ah="ft-fragment";var q="."+ah;var R="revealed";var Y="revealed-temp";var S="ft-default-progress";var E="."+S;var N="ft-section-thumb";var w="."+N;var g="ft-page-thumb";var I="."+g;var l="flowtimenavigation";var A=document.querySelector(".flowtime");var m=document.querySelector("body");var ac=false;var O="";var t;var y=false;var ag=document.title;var F;var am=22;var ab=null;var n=false;var aa=false;var s=false;var D=false;var W=false;var au=false;var af=false;var z=true;try{var i=document.querySelector("html").className.toLowerCase();if(i.indexOf("ie7")!=-1||i.indexOf("ie8")!=-1||i.indexOf("lt-ie9")!=-1){z=false}}catch(M){z=false}if(z){Brav1Toolbox.addClass(m,"ft-absolute-nav")}if(z){Brav1Toolbox.addListener(document,"click",aA,false)}function aA(aG){var aC=aG.target.getAttribute("href");if(aC&&aC.substr(0,1)=="#"){aG.preventDefault();var aF=aC;var aD=p.setPage(aF);K(aD,null,true)}if(y&&Brav1Toolbox.hasClass(aG.target,al)){K(aG.target,null,true)}if(Brav1Toolbox.hasClass(aG.target,g)){var aE=Number(v(aG.target.getAttribute("data-p")));var aB=Number(v(aG.target.getAttribute("data-sp")));ae(aE,aB)}}if(ac==false){window.onpopstate=r}function r(aD){ac=false;var aC;if(aD.state){aC=aD.state.token.replace("#/","")}else{aC=document.location.hash.replace("#/","")}var aB=p.setPage(aC);K(aB,false)}Brav1Toolbox.addListener(window,"hashchange",B);function B(aD,aE){if(ac||aE){var aC=document.location.hash.replace("#/","");var aB=p.setPage(aC);K(aB,false)}}var d=(function ao(){var aD=NaN;function aB(){e();if(!y){aD=setTimeout(aC,300)}}function e(){clearTimeout(aD)}function aC(){B(null,true)}Brav1Toolbox.addListener(window,"resize",aB);return{enable:aB,disable:e,}})();function av(aB){if(aB.length>0){var e=aB.replace("#/","").split("/");var aD=document.querySelector(aq+"[data-id=__"+e[0]+"]")||document.querySelector(aq+"[data-prog=__"+e[0]+"]");if(aD!=null){var aC=null;if(e.length>1){aC=aD.querySelector(ak+"[data-id=__"+e[1]+"]")||aD.querySelector(ak+"[data-prog=__"+e[1]+"]")}if(aC==null){aC=aD.querySelector(ak)}return aC}}return}function an(){p.update();B(null,true)}function ax(aE){var aD=ag;var e=p.getCurrentPage().getAttribute("data-title");if(e==null){var aC=aE.split("/");for(var aB=0;aB<aC.length;aB++){aD+=" | "+aC[aB]}}else{if(p.getCurrentSection().getAttribute("data-title")!=null){aD+=" | "+p.getCurrentSection().getAttribute("data-title")}aD+=" | "+e}document.title=aD}function c(e){return(e.getAttribute("data-id")!=null?e.getAttribute("data-id").replace(/__/,""):e.getAttribute("data-prog").replace(/__/,""))}function ar(e){if(e.substr(0,2)!="__"){return"__"+e}else{return e}}function v(e){if(e.substr(0,2)=="__"){return e.replace(/__/,"")}else{return e}}function K(aI,aF,aB){aF=aF==false?aF:true;if(!aI){if(p.getCurrentPage()!=null){aI=p.getCurrentPage()}else{aI=document.querySelector(ak)}aF=true}var aH;var aG;var aC=p.getPageIndex(aI);if(s==true){aH=aI.offsetLeft+aI.parentNode.offsetLeft;aG=aI.offsetTop+aI.parentNode.offsetTop}else{aH=aC.section;aG=aC.page}x(aH,aG);t=aC;var aD=p.getHash(aI);if(aB==true){p.updateFragments()}if(aj&&aF!=false){var e={token:aD};var aE="#/"+aD;if(aE!=O){O=aE;window.history.pushState(e,null,O)}}else{document.location.hash="/"+aD}ax(aD);if(y){j()}p.switchActivePage(p.getCurrentPage(),true);Brav1Toolbox.dispatchEvent(l,{section:p.getCurrentSection(),page:p.getCurrentPage(),sectionIndex:aC.section,pageIndex:aC.page,prevSection:p.hasPrevSection(),nextSection:p.hasNextSection(),prevPage:p.hasPrevPage(),nextPage:p.hasNextPage(),progress:p.getProgress(),total:p.getPagesTotalLength()});if(af){az()}}function x(e,aB){if(Brav1Toolbox.testCSS("transform")){if(s){A.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-e+"px) translateY("+-aB+"px)"}else{A.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-e*100+"%) translateY("+-aB*100+"%)"}}else{if(s){A.style.top=-aB+"px";A.style.left=-e+"px"}else{A.style.top=-aB*100+"%";A.style.left=-e*100+"%"}}window.scrollTo(0,0)}var ab=null;var X=null;function at(){var aB=document.createDocumentFragment();ab=document.createElement("div");ab.className=S;aB.appendChild(ab);for(var aD=0;aD<p.getSectionsLength();aD++){var e=document.createElement("div");e.className=N;var aC=p.getPages(aD);for(var aE=0;aE<aC.length;aE++){var aF=document.createElement("div");aF.className=g;aF.setAttribute("data-p","__"+aD);aF.setAttribute("data-sp","__"+aE);e.appendChild(aF)}ab.appendChild(e)}m.appendChild(ab)}function o(){if(ab!=null){m.removeChild(ab);ab=null}}function az(){if(ab!=null){var aD=ab.querySelectorAll(I);for(var aC=0;aC<aD.length;aC++){var aE=aD[aC];var aB=Number(v(aE.getAttribute("data-p")));var e=Number(v(aE.getAttribute("data-sp")));if(aB==p.getPageIndex().section&&e==p.getPageIndex().page){Brav1Toolbox.addClass(aD[aC],"actual")}else{Brav1Toolbox.removeClass(aD[aC],"actual")}}}}function Q(e){if(y){j(e)}else{F=p.getCurrentPage();J()}}function j(e){y=false;Brav1Toolbox.removeClass(m,"ft-overview");p.hideFragments();if(e==true){K(F)}else{K()}}function J(){y=true;Brav1Toolbox.addClass(m,"ft-overview");p.showFragments();if(W==false){H(true)}else{G(true)}}function H(aD){if(aD){var aC=100/p.getSectionsLength();var aB=100/p.getPagesLength();var aE=Math.min(aC,aB)*0.9;var e=(100-p.getSectionsLength()*aE)/2;var aF=(100-p.getPagesLength()*aE)/2;A.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+aF+"%) scale("+aE/100+", "+aE/100+")"}else{}}function G(aB){if(aB){var aD=am;var aC=p.getPageIndex();var e=50-(aD*aC.section)-(aD/2);var aE=50-(aD*aC.page)-(aD/2);A.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+aE+"%) scale("+aD/100+", "+aD/100+")"}}Brav1Toolbox.addListener(window,"keydown",u);Brav1Toolbox.addListener(window,"keyup",Z);function u(aC){var aB=aC.target.tagName;if(aB!="INPUT"&&aB!="TEXTAREA"&&aB!="SELECT"){if(aC.keyCode>=37&&aC.keyCode<=40){aC.preventDefault()}}}function Z(aD){var aB=aD.target.tagName;var aC;if(aB!="INPUT"&&aB!="TEXTAREA"&&aB!="SELECT"){aD.preventDefault();switch(aD.keyCode){case 27:Q(true);break;case 37:b(aD.shiftKey);break;case 39:C(aD.shiftKey);break;case 38:ai(aD.shiftKey);break;case 40:P(aD.shiftKey);break;case 13:if(y){ae(p.getCurrentHilited())}break;default:break}}}function C(e){var aB=p.getNextSection(e,n,y);if(aB!=undefined){K(aB)}else{if(y&&W){J()}}}function b(e){var aB=p.getPrevSection(e,n,y);if(aB!=undefined){K(aB)}else{if(y&&W){J()}}}function P(e){var aB=p.getNextPage(e,y);if(aB!=undefined){K(aB)}else{if(y&&W){J()}}}function ai(e){var aB=p.getPrevPage(e,y);if(aB!=undefined){K(aB)}else{if(y&&W){J()}}}function ae(){var aB=ae.arguments;if(aB.length>0){if(aB.length==1){if(Brav1Toolbox.typeOf(aB[0])==="Object"){var aF=aB[0];var aE=aF.page;var aD=aF.subPage;if(aE!=null&&aE!=undefined){var e=document.querySelector(aq+"[data-id="+ar(aE)+"]");if(aD!=null&&aD!=undefined){var aC=e.querySelector(ak+"[data-id="+ar(aD)+"]");if(aC!=null){K(aC);return}}}}else{if(aB[0].nodeName!=undefined){K(aB[0],null,true)}}}else{if(Brav1Toolbox.typeOf(aB[0])==="Number"||aB[0]===0){var aC=p.getPageByIndex(aB[1],aB[0]);K(aC);return}}}}var p=(function(){var a8;var aM;var a4;var aR;var aY=[];var aX=0;var bk=0;var a5=0;var bd=0;var aQ=0;var be=0;var aK=0;var a1;function aC(){aM=[];a4=document.querySelectorAll(q);aR=[];a8=A.querySelectorAll(".flowtime > "+aq);for(var bo=0;bo<a8.length;bo++){var bm=[];var br=a8[bo];aR[bo]=[];aY[bo]=[];if(br.getAttribute("data-id")){br.setAttribute("data-id","__"+br.getAttribute("data-id"))}br.setAttribute("data-prog","__"+(bo+1));br.index=bo;br.setAttribute("id","");var bl=br.querySelectorAll(ak);a5+=bl.length;bk=Math.max(bk,bl.length);for(var bp=0;bp<bl.length;bp++){var bn=bl[bp];if(bn.getAttribute("data-id")){bn.setAttribute("data-id","__"+bn.getAttribute("data-id"))}bn.setAttribute("data-prog","__"+(bp+1));bn.index=bp;bn.setAttribute("id","");bm.push(bn);var bq=bn.querySelectorAll(q);aR[bo][bp]=bq;aY[bo][bp]=-1}aM.push(bm)}aX=a8.length}function aG(bo,bn,bp){var bm=aQ;var bl=bo===!D;if(bn==true&&aR[bd][aQ].length>0&&aY[bd][aQ]<aR[bd][aQ].length-1&&bl!=true&&bp==false){aN(bd,aQ)}else{bm=0;if(bl!=true||aa==true||bd+1>aM.length-1){bm=aQ}bd=Math.min(bd+1,aM.length-1);return a3(aM[bd],bm,bp)}return a9(aM[bd][aQ],bp)}function a6(bo,bn,bp){var bm=aQ;var bl=bo==!D;if(bn==true&&aR[bd][aQ].length>0&&aY[bd][aQ]>=0&&bl!=true&&bp==false){bg(bd,aQ)}else{var bm=0;if(bl!=true||aa==true||bd-1<0){bm=aQ}bd=Math.max(bd-1,0);return a3(aM[bd],bm,bp)}return a9(aM[bd][aQ],bp)}function a3(bp,bm,bo){var bn=bp[bm];if(bn==undefined){for(var bl=bm;bl>=0;bl--){if(bp[bl]!=undefined){bn=bp[bl];bm=bl;break}}}aQ=bm;if(!y){aZ()}return a9(bn,bo)}function aB(bl,bm){if(aR[bd][aQ].length>0&&aY[bd][aQ]<aR[bd][aQ].length-1&&bl!=true&&bm==false){aN(bd,aQ)}else{if(aM[bd][aQ+1]==undefined&&aM[bd+1]!=undefined){bd+=1;aQ=0}else{aQ=Math.min(aQ+1,aM[bd].length-1)}}return a9(aM[bd][aQ],bm)}function bh(bl,bm){if(aR[bd][aQ].length>0&&aY[bd][aQ]>=0&&bl!=true&&bm==false){bg(bd,aQ)}else{if(aQ==0&&aM[bd-1]!=undefined){bd-=1;aQ=aM[bd].length-1}else{aQ=Math.max(aQ-1,0)}}return a9(aM[bd][aQ],bm)}function a9(bl,bm){if(bm==true){aD(bl);return}else{return bl}}function aN(bl,bm,bn){if(bn!=undefined){aY[bl][bm]=bn}else{bn=aY[bl][bm]+=1}Brav1Toolbox.addClass(aR[bl][bm][bn],R)}function bg(bl,bm,bn){if(bn!=undefined){aY[bl][bm]=bn}else{bn=aY[bl][bm]}Brav1Toolbox.removeClass(aR[bl][bm][bn],R);Brav1Toolbox.removeClass(aR[bl][bm][bn],Y);aY[bl][bm]-=1}function aI(){for(var bl=0;bl<a4.length;bl++){Brav1Toolbox.addClass(a4[bl],Y)}}function aT(){for(var bl=0;bl<a4.length;bl++){Brav1Toolbox.removeClass(a4[bl],Y)}}function aZ(){for(var bp=0;bp<aR.length;bp++){var bm=aR[bp];for(var bn=0;bn<bm.length;bn++){var bl=bm[bn];if(bl.length>0){if(bp>bd){for(var bo=bl.length-1;bo>=0;bo--){bg(bp,bn,bo)}}else{if(bp<bd){for(var bo=0;bo<bl.length;bo++){aN(bp,bn,bo)}}else{if(bp==bd){if(bn>aQ){for(var bo=bl.length-1;bo>=0;bo--){bg(bp,bn,bo)}}else{if(bn<aQ){for(var bo=0;bo<bl.length;bo++){aN(bp,bn,bo)}}else{if(bn==aQ){for(var bo=0;bo<bl.length;bo++){if(aa==false){bg(bp,bn,bo)}else{if(t.section>p.getPageIndex().section){aN(bp,bn,bo)}else{bg(bp,bn,bo)}}}if(aa==false){aY[bp][bn]=-1}else{if(t.section>p.getPageIndex().section){aY[bp][bn]=bo-1}else{aY[bp][bn]=-1}}}}}}}}}}}}function aP(bl){if(bl){}return bd}function e(bl){if(bl){}return aQ}function bc(){return a8}function aU(bl){return aM[bl]}function bj(){return aX}function a0(){return bk}function aW(){return a5}function a7(bn){var bm=bd;var bl=aQ;if(bn!=undefined){bm=bn.parentNode.index;bl=bn.index}return{section:bm,page:bl}}function bf(bl){return a8[bl]}function aS(bl,bm){return aM[bm][bl]}function aJ(){return a8[bd]}function ba(){return aM[bd][aQ]}function aV(){return bd<a8.length-1}function aH(){return bd>0}function aL(){return aQ<aM[bd].length-1}function aF(){return aQ>0}function a2(){if(bd==0&&aQ==0){return 0}var bm=0;for(var bl=0;bl<bd;bl++){bm+=aM[bl].length}bm+=aM[bd][aQ].index+1;return bm}function bb(bo){if(bo!=undefined){aQ=a7(bo).page;bd=a7(bo).section}var bn="";var bl=a8[bd];bn+=c(bl);if(aM[bd].length>1){var bm=aM[bd][aQ];bn+="/"+c(bm)}return bn}function aE(bp){var bq=av(bp);if(bq){var bm=bq.parentNode;for(var bl=0;bl<aM.length;bl++){var bo=aM[bl];if(a8[bl]===bm){bd=bl;for(var bn=0;bn<bo.length;bn++){if(bo[bn]===bq){aQ=bn;break}}}}aZ()}return bq}function aD(bq,bl){for(var bm=0;bm<aM.length;bm++){var bo=aM[bm];for(var bn=0;bn<bo.length;bn++){var bp=aM[bm][bn];if(bp!==bq){Brav1Toolbox.removeClass(bp,"hilite");if(y==false&&bp!==ba()){Brav1Toolbox.removeClass(bp,"actual")}}}}Brav1Toolbox.addClass(bq,"hilite");if(bl){bi(bq)}a1=bq}function aO(){return a1}function bi(bl){Brav1Toolbox.addClass(bl,"actual")}aC();return{update:aC,updateFragments:aZ,showFragments:aI,hideFragments:aT,getSection:aP,getPage:e,getSections:bc,getPages:aU,getNextSection:aG,getPrevSection:a6,getNextPage:aB,getPrevPage:bh,getSectionsLength:bj,getPagesLength:a0,getPagesTotalLength:aW,getPageIndex:a7,getSectionByIndex:bf,getPageByIndex:aS,getCurrentSection:aJ,getCurrentPage:ba,getProgress:a2,getHash:bb,setPage:aE,switchActivePage:aD,getCurrentHilited:aO,hasNextSection:aV,hasPrevSection:aH,hasNextPage:aL,hasPrevPage:aF}})();function a(){if(af&&ab==null){at()}if(document.location.hash.length>0){B(null,true)}else{if(a.arguments.length>0){ae.apply(this,a.arguments)}else{ae(0,0);az()}}}function V(e){n=e;ad(e)}function ad(e){aa=e}function aw(e){aj=e}function ay(e){s=e;K()}function k(e){D=e}function L(e){W=e}function U(e){au=e}function ap(e){af=e;if(af){if(ab==null){at()}az()}else{if(ab!=null){o()}}}function T(aC,aB,e){Brav1Toolbox.addListener(document,aC,aB,e)}return{start:a,updateNavigation:an,nextSection:C,prevSection:b,next:P,prev:ai,nextFragment:P,prevFragment:ai,gotoPage:ae,toggleOverview:Q,fragmentsOnSide:V,showFragmentsOnBack:ad,useHistory:aw,slideInPx:ay,sectionsSlideToTop:k,useOverviewVariant:L,twoStepsSlide:U,showProgress:ap,addEventListener:T}})();