/*!
 * Brav1Toolbox.js - common utility scripts and polyfills
 * http://marcolago.com/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Brav1Toolbox=(function(){var c=["","-webkit-","-moz-","-ms-","-o-"];var h;if(window.getComputedStyle){h=window.getComputedStyle(document.body)}else{h=document.documentElement.style}function j(l,n,m,k){if(l.addEventListener){l.addEventListener(n,m,k)}else{if(l.attachEvent){l.attachEvent(n,m)}}}function f(k){return i(k)!=""}function i(n){for(var k=0;k<c.length;k++){var m=c[k].replace(/-/g,"");var l=n;if(m.length>0){l=l.charAt(0).toUpperCase()+l.substr(1)}l=m+l;if(l in h==true){return l}}return""}function d(k){return !!k&&Object.prototype.toString.call(k).match(/(\w+)\]/)[1]}function g(l,m){if(l.classList){l.classList.add(m)}else{if(e(l,m)==false){var k=l.className;if(k.length>0){k+=" "}l.className=k+m}}}function a(l,m){if(l.classList){l.classList.remove(m)}else{var k=l.className;if(k.indexOf(m)!=-1){if(k.indexOf(" "+m)!=-1){k=k.replace(" "+m,"")}else{if(k.indexOf(m+" ")!=-1){k=k.replace(m+" ","")}else{k=k.replace(m,"")}}}l.className=k}}function e(k,l){if(k.classList){return k.classList.contains(l)}else{return k.className.indexOf(l)!=-1}}function b(k,n){if(document.createEvent){var m=document.createEvent("HTMLEvents");m.initEvent(k,true,true);for(var l in n){m[l]=n[l]}document.dispatchEvent(m)}}return{addListener:j,dispatchEvent:b,testCSS:f,getPrefixed:i,typeOf:d,addClass:g,removeClass:a,hasClass:e}})();
/*!
 * Flowtime.js
 * http://marcolago.com/flowtime-js/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Flowtime=(function(){var h="ontouchstart" in document.documentElement;var ah=window.history.pushState;var f="ft-section";var ao="."+f;var aj="ft-page";var ai="."+aj;var af="ft-fragment";var q="."+af;var R="ft-default-progress";var E="."+R;var N="ft-section-thumb";var w="."+N;var g="ft-page-thumb";var I="."+g;var l="flowtimenavigation";var A=document.querySelector(".flowtime");var m=document.querySelector("body");var aa=false;var O="";var t;var y=false;var ae=document.title;var F;var ak=22;var Z=null;var n=false;var Y=false;var s=false;var D=false;var V=false;var ar=false;var ad=false;var z=true;try{var i=document.querySelector("html").className.toLowerCase();if(i.indexOf("ie7")!=-1||i.indexOf("ie8")!=-1||i.indexOf("lt-ie9")!=-1){z=false}}catch(M){z=false}if(z){Brav1Toolbox.addClass(m,"ft-absolute-nav")}if(z){Brav1Toolbox.addListener(document,"click",ay,false)}function ay(aE){var aA=aE.target.getAttribute("href");if(aA&&aA.substr(0,1)=="#"){aE.preventDefault();var aD=aA;var aB=p.setPage(aD);K(aB,null,true)}if(y&&Brav1Toolbox.hasClass(aE.target,aj)){K(aE.target,null,true)}if(Brav1Toolbox.hasClass(aE.target,g)){var aC=Number(v(aE.target.getAttribute("data-p")));var az=Number(v(aE.target.getAttribute("data-sp")));ac(aC,az)}}if(aa==false){window.onpopstate=r}function r(aB){aa=false;var aA;if(aB.state){aA=aB.state.token.replace("#/","")}else{aA=document.location.hash.replace("#/","")}var az=p.setPage(aA);K(az,false)}Brav1Toolbox.addListener(window,"hashchange",B);function B(aB,aC){if(aa||aC){var aA=document.location.hash.replace("#/","");var az=p.setPage(aA);K(az,false)}}var d=(function am(){var aB=NaN;function az(){e();if(!y){aB=setTimeout(aA,300)}}function e(){clearTimeout(aB)}function aA(){B(null,true)}Brav1Toolbox.addListener(window,"resize",az);return{enable:az,disable:e,}})();function at(az){if(az.length>0){var e=az.replace("#/","").split("/");var aB=document.querySelector(ao+"[data-id=__"+e[0]+"]")||document.querySelector(ao+"[data-prog=__"+e[0]+"]");if(aB!=null){var aA=null;if(e.length>1){aA=aB.querySelector(ai+"[data-id=__"+e[1]+"]")||aB.querySelector(ai+"[data-prog=__"+e[1]+"]")}if(aA==null){aA=aB.querySelector(ai)}return aA}}return}function al(){p.update();B(null,true)}function av(aC){var aB=ae;var e=p.getCurrentPage().getAttribute("data-title");if(e==null){var aA=aC.split("/");for(var az=0;az<aA.length;az++){aB+=" | "+aA[az]}}else{if(p.getCurrentSection().getAttribute("data-title")!=null){aB+=" | "+p.getCurrentSection().getAttribute("data-title")}aB+=" | "+e}document.title=aB}function c(e){return(e.getAttribute("data-id")!=null?e.getAttribute("data-id").replace(/__/,""):e.getAttribute("data-prog").replace(/__/,""))}function ap(e){if(e.substr(0,2)!="__"){return"__"+e}else{return e}}function v(e){if(e.substr(0,2)=="__"){return e.replace(/__/,"")}else{return e}}function K(aG,aD,az){aD=aD==false?aD:true;if(!aG){if(p.getCurrentPage()!=null){aG=p.getCurrentPage()}else{aG=document.querySelector(ai)}aD=true}var aF;var aE;var aA=p.getPageIndex(aG);if(s==true){aF=aG.offsetLeft+aG.parentNode.offsetLeft;aE=aG.offsetTop+aG.parentNode.offsetTop}else{aF=aA.section;aE=aA.page}x(aF,aE);t=aA;var aB=p.getHash(aG);if(az==true){p.updateFragments()}if(ah&&aD!=false){var e={token:aB};var aC="#/"+aB;if(aC!=O){O=aC;window.history.pushState(e,null,O)}}else{document.location.hash="/"+aB}av(aB);if(y){j()}p.switchActivePage(p.getCurrentPage(),true);Brav1Toolbox.dispatchEvent(l,{section:p.getCurrentSection(),page:p.getCurrentPage(),sectionIndex:aA.section,pageIndex:aA.page,prevSection:p.hasPrevSection(),nextSection:p.hasNextSection(),prevPage:p.hasPrevPage(),nextPage:p.hasNextPage(),progress:p.getProgress(),total:p.getPagesTotalLength()});if(ad){ax()}}function x(e,az){if(Brav1Toolbox.testCSS("transform")){if(s){A.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-e+"px) translateY("+-az+"px)"}else{A.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-e*100+"%) translateY("+-az*100+"%)"}}else{if(s){A.style.top=-az+"px";A.style.left=-e+"px"}else{A.style.top=-az*100+"%";A.style.left=-e*100+"%"}}window.scrollTo(0,0)}var Z=null;var W=null;function aq(){var az=document.createDocumentFragment();Z=document.createElement("div");Z.className=R;az.appendChild(Z);for(var aB=0;aB<p.getSectionsLength();aB++){var e=document.createElement("div");e.className=N;var aA=p.getPages(aB);for(var aC=0;aC<aA.length;aC++){var aD=document.createElement("div");aD.className=g;aD.setAttribute("data-p","__"+aB);aD.setAttribute("data-sp","__"+aC);e.appendChild(aD)}Z.appendChild(e)}m.appendChild(Z)}function o(){if(Z!=null){m.removeChild(Z);Z=null}}function ax(){if(Z!=null){var aB=Z.querySelectorAll(I);for(var aA=0;aA<aB.length;aA++){var aC=aB[aA];var az=Number(v(aC.getAttribute("data-p")));var e=Number(v(aC.getAttribute("data-sp")));if(az==p.getPageIndex().section&&e==p.getPageIndex().page){Brav1Toolbox.addClass(aB[aA],"actual")}else{Brav1Toolbox.removeClass(aB[aA],"actual")}}}}function Q(e){if(y){j(e)}else{F=p.getCurrentPage();J()}}function j(e){y=false;Brav1Toolbox.removeClass(m,"ft-overview");p.hideFragments();if(e==true){K(F)}else{K()}}function J(){y=true;Brav1Toolbox.addClass(m,"ft-overview");p.showFragments();if(V==false){H(true)}else{G(true)}}function H(aB){if(aB){var aA=100/p.getSectionsLength();var az=100/p.getPagesLength();var aC=Math.min(aA,az)*0.9;var e=(100-p.getSectionsLength()*aC)/2;var aD=(100-p.getPagesLength()*aC)/2;A.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+aD+"%) scale("+aC/100+", "+aC/100+")"}else{}}function G(az){if(az){var aB=ak;var aA=p.getPageIndex();var e=50-(aB*aA.section)-(aB/2);var aC=50-(aB*aA.page)-(aB/2);A.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+aC+"%) scale("+aB/100+", "+aB/100+")"}}Brav1Toolbox.addListener(window,"keydown",u);Brav1Toolbox.addListener(window,"keyup",X);function u(aA){var az=aA.target.tagName;if(az!="INPUT"&&az!="TEXTAREA"&&az!="SELECT"){if(aA.keyCode>=37&&aA.keyCode<=40){aA.preventDefault()}}}function X(aB){var az=aB.target.tagName;var aA;if(az!="INPUT"&&az!="TEXTAREA"&&az!="SELECT"){aB.preventDefault();switch(aB.keyCode){case 27:Q(true);break;case 37:b(aB.shiftKey);break;case 39:C(aB.shiftKey);break;case 38:ag(aB.shiftKey);break;case 40:P(aB.shiftKey);break;case 13:if(y){ac(p.getCurrentHilited())}break;default:break}}}function C(e){var az=p.getNextSection(e,n,y);if(az!=undefined){K(az)}else{if(y&&V){J()}}}function b(e){var az=p.getPrevSection(e,n,y);if(az!=undefined){K(az)}else{if(y&&V){J()}}}function P(e){var az=p.getNextPage(e,y);if(az!=undefined){K(az)}else{if(y&&V){J()}}}function ag(e){var az=p.getPrevPage(e,y);if(az!=undefined){K(az)}else{if(y&&V){J()}}}function ac(){var az=ac.arguments;if(az.length>0){if(az.length==1){if(Brav1Toolbox.typeOf(az[0])==="Object"){var aD=az[0];var aC=aD.page;var aB=aD.subPage;if(aC!=null&&aC!=undefined){var e=document.querySelector(ao+"[data-id="+ap(aC)+"]");if(aB!=null&&aB!=undefined){var aA=e.querySelector(ai+"[data-id="+ap(aB)+"]");if(aA!=null){K(aA);return}}}}else{if(az[0].nodeName!=undefined){K(az[0],null,true)}}}else{if(Brav1Toolbox.typeOf(az[0])==="Number"||az[0]===0){var aA=p.getPageByIndex(az[1],az[0]);K(aA);return}}}}var p=(function(){var a6;var aK;var a2;var aP;var aW=[];var aV=0;var bi=0;var a3=0;var bb=0;var aO=0;var bc=0;var aI=0;var aZ;function aA(){aK=[];a2=document.querySelectorAll(q);aP=[];a6=A.querySelectorAll(".flowtime > "+ao);for(var bm=0;bm<a6.length;bm++){var bk=[];var bp=a6[bm];aP[bm]=[];aW[bm]=[];if(bp.getAttribute("data-id")){bp.setAttribute("data-id","__"+bp.getAttribute("data-id"))}bp.setAttribute("data-prog","__"+(bm+1));bp.index=bm;bp.setAttribute("id","");var bj=bp.querySelectorAll(ai);a3+=bj.length;bi=Math.max(bi,bj.length);for(var bn=0;bn<bj.length;bn++){var bl=bj[bn];if(bl.getAttribute("data-id")){bl.setAttribute("data-id","__"+bl.getAttribute("data-id"))}bl.setAttribute("data-prog","__"+(bn+1));bl.index=bn;bl.setAttribute("id","");bk.push(bl);var bo=bl.querySelectorAll(q);aP[bm][bn]=bo;aW[bm][bn]=-1}aK.push(bk)}aV=a6.length}function aE(bm,bl,bn){var bk=aO;var bj=bm===!D;if(bl==true&&aP[bb][aO].length>0&&aW[bb][aO]<aP[bb][aO].length-1&&bj!=true&&bn==false){aL(bb,aO)}else{bk=0;if(bj!=true||Y==true||bb+1>aK.length-1){bk=aO}bb=Math.min(bb+1,aK.length-1);return a1(aK[bb],bk,bn)}return a7(aK[bb][aO],bn)}function a4(bm,bl,bn){var bk=aO;var bj=bm==!D;if(bl==true&&aP[bb][aO].length>0&&aW[bb][aO]>=0&&bj!=true&&bn==false){be(bb,aO)}else{var bk=0;if(bj!=true||Y==true||bb-1<0){bk=aO}bb=Math.max(bb-1,0);return a1(aK[bb],bk,bn)}return a7(aK[bb][aO],bn)}function a1(bn,bk,bm){var bl=bn[bk];if(bl==undefined){for(var bj=bk;bj>=0;bj--){if(bn[bj]!=undefined){bl=bn[bj];bk=bj;break}}}aO=bk;aX();return a7(bl,bm)}function az(bj,bk){if(aP[bb][aO].length>0&&aW[bb][aO]<aP[bb][aO].length-1&&bj!=true&&bk==false){aL(bb,aO)}else{if(aK[bb][aO+1]==undefined&&aK[bb+1]!=undefined){bb+=1;aO=0}else{aO=Math.min(aO+1,aK[bb].length-1)}}return a7(aK[bb][aO],bk)}function bf(bj,bk){if(aP[bb][aO].length>0&&aW[bb][aO]>=0&&bj!=true&&bk==false){be(bb,aO)}else{if(aO==0&&aK[bb-1]!=undefined){bb-=1;aO=aK[bb].length-1}else{aO=Math.max(aO-1,0)}}return a7(aK[bb][aO],bk)}function a7(bj,bk){if(bk==true){aB(bj);return}else{return bj}}function aL(bj,bk,bl){if(bl!=undefined){aW[bj][bk]=bl}else{bl=aW[bj][bk]+=1}Brav1Toolbox.addClass(aP[bj][bk][bl],"revealed")}function be(bj,bk,bl){if(bl!=undefined){aW[bj][bk]=bl}else{bl=aW[bj][bk]}Brav1Toolbox.removeClass(aP[bj][bk][bl],"revealed");Brav1Toolbox.removeClass(aP[bj][bk][bl],"revealed-temp");aW[bj][bk]-=1}function aG(){for(var bj=0;bj<a2.length;bj++){Brav1Toolbox.addClass(a2[bj],"revealed-temp")}}function aR(){for(var bj=0;bj<a2.length;bj++){Brav1Toolbox.removeClass(a2[bj],"revealed-temp")}}function aX(){for(var bn=0;bn<aP.length;bn++){var bk=aP[bn];for(var bl=0;bl<bk.length;bl++){var bj=bk[bl];if(bj.length>0){if(bn>bb){for(var bm=bj.length-1;bm>=0;bm--){be(bn,bl,bm)}}else{if(bn<bb){for(var bm=0;bm<bj.length;bm++){aL(bn,bl,bm)}}else{if(bn==bb){if(bl>aO){for(var bm=bj.length-1;bm>=0;bm--){be(bn,bl,bm)}}else{if(bl<aO){for(var bm=0;bm<bj.length;bm++){aL(bn,bl,bm)}}else{if(bl==aO){for(var bm=0;bm<bj.length;bm++){if(Y==false){be(bn,bl,bm)}else{if(t.section>p.getPageIndex().section){aL(bn,bl,bm)}else{be(bn,bl,bm)}}}if(Y==false){aW[bn][bl]=-1}else{if(t.section>p.getPageIndex().section){aW[bn][bl]=bm-1}else{aW[bn][bl]=-1}}}}}}}}}}}}function aN(bj){if(bj){}return bb}function e(bj){if(bj){}return aO}function ba(){return a6}function aS(bj){return aK[bj]}function bh(){return aV}function aY(){return bi}function aU(){return a3}function a5(bl){var bk=bb;var bj=aO;if(bl!=undefined){bk=bl.parentNode.index;bj=bl.index}return{section:bk,page:bj}}function bd(bj){return a6[bj]}function aQ(bj,bk){return aK[bk][bj]}function aH(){return a6[bb]}function a8(){return aK[bb][aO]}function aT(){return bb<a6.length-1}function aF(){return bb>0}function aJ(){return aO<aK[bb].length-1}function aD(){return aO>0}function a0(){if(bb==0&&aO==0){return 0}var bk=0;for(var bj=0;bj<bb;bj++){bk+=aK[bj].length}bk+=aK[bb][aO].index+1;return bk}function a9(bm){if(bm!=undefined){aO=a5(bm).page;bb=a5(bm).section}var bl="";var bj=a6[bb];bl+=c(bj);if(aK[bb].length>1){var bk=aK[bb][aO];bl+="/"+c(bk)}return bl}function aC(bn){var bo=at(bn);if(bo){var bk=bo.parentNode;for(var bj=0;bj<aK.length;bj++){var bm=aK[bj];if(a6[bj]===bk){bb=bj;for(var bl=0;bl<bm.length;bl++){if(bm[bl]===bo){aO=bl;break}}}}aX()}return bo}function aB(bo,bj){for(var bk=0;bk<aK.length;bk++){var bm=aK[bk];for(var bl=0;bl<bm.length;bl++){var bn=aK[bk][bl];if(bn!==bo){Brav1Toolbox.removeClass(bn,"hilite");if(y==false&&bn!==a8()){Brav1Toolbox.removeClass(bn,"actual")}}}}Brav1Toolbox.addClass(bo,"hilite");if(bj){bg(bo)}aZ=bo}function aM(){return aZ}function bg(bj){Brav1Toolbox.addClass(bj,"actual")}aA();return{update:aA,updateFragments:aX,showFragments:aG,hideFragments:aR,getSection:aN,getPage:e,getSections:ba,getPages:aS,getNextSection:aE,getPrevSection:a4,getNextPage:az,getPrevPage:bf,getSectionsLength:bh,getPagesLength:aY,getPagesTotalLength:aU,getPageIndex:a5,getSectionByIndex:bd,getPageByIndex:aQ,getCurrentSection:aH,getCurrentPage:a8,getProgress:a0,getHash:a9,setPage:aC,switchActivePage:aB,getCurrentHilited:aM,hasNextSection:aT,hasPrevSection:aF,hasNextPage:aJ,hasPrevPage:aD}})();function a(){if(ad&&Z==null){aq()}if(document.location.hash.length>0){B(null,true)}else{if(a.arguments.length>0){ac.apply(this,a.arguments)}else{ac(0,0);ax()}}}function U(e){n=e;ab(e)}function ab(e){Y=e}function au(e){ah=e}function aw(e){s=e;K()}function k(e){D=e}function L(e){V=e}function T(e){ar=e}function an(e){ad=e;if(ad){if(Z==null){aq()}ax()}else{if(Z!=null){o()}}}function S(aA,az,e){Brav1Toolbox.addListener(document,aA,az,e)}return{start:a,updateNavigation:al,nextSection:C,prevSection:b,next:P,prev:ag,nextFragment:P,prevFragment:ag,gotoPage:ac,toggleOverview:Q,fragmentsOnSide:U,showFragmentsOnBack:ab,useHistory:au,slideInPx:aw,sectionsSlideToTop:k,useOverviewVariant:L,twoStepsSlide:T,showProgress:an,addEventListener:S}})();