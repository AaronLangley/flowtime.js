/*!
 * Flowtime.js
 * http://marcolago.com/absolide/flowtime/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Brav1Toolbox=(function(){var c=["","-webkit-","-moz-","-ms-","-o-"];var h;if(window.getComputedStyle){h=window.getComputedStyle(document.body)}else{h=document.documentElement.style}function j(l,n,m,k){if(l.addEventListener){l.addEventListener(n,m,k)}else{if(l.attachEvent){l.attachEvent(n,m)}}}function f(k){return i(k)!=""}function i(n){for(var k=0;k<c.length;k++){var m=c[k].replace(/-/g,"");var l=n;if(m.length>0){l=l.charAt(0).toUpperCase()+l.substr(1)}l=m+l;if(l in h==true){return l}}return""}function d(k){return !!k&&Object.prototype.toString.call(k).match(/(\w+)\]/)[1]}function g(l,m){if(l.classList){l.classList.add(m)}else{if(e(l,m)==false){var k=l.className;if(k.length>0){k+=" "}l.className=k+m}}}function a(l,m){if(l.classList){l.classList.remove(m)}else{var k=l.className;if(k.indexOf(m)!=-1){if(k.indexOf(" "+m)!=-1){k=k.replace(" "+m,"")}else{if(k.indexOf(m+" ")!=-1){k=k.replace(m+" ","")}else{k=k.replace(m,"")}}}l.className=k}}function e(k,l){if(k.classList){return k.classList.contains(l)}else{return k.className.indexOf(l)!=-1}}function b(k,n){var m=document.createEvent("HTMLEvents");m.initEvent(k,true,true);for(var l in n){m[l]=n[l]}document.dispatchEvent(m)}return{addListener:j,dispatchEvent:b,testCSS:f,getPrefixed:i,typeOf:d,addClass:g,removeClass:a,hasClass:e}})();
var Flowtime=(function(){var J="ontouchstart" in document.documentElement;var O=window.history.pushState;var am="ft-section";var w="."+am;var D="ft-page";var e="."+D;var ab="ft-fragment";var ag="."+ab;var a="ft-default-progress";var ah="."+a;var n="ft-section-thumb";var j="."+n;var A="ft-page-thumb";var K="."+A;var Z=document.querySelector(".flowtime");var F=document.querySelector("body");var ac=false;var b="";var ai;var s=false;var Y=document.title;var an;var x=22;var R=null;var ap=false;var T=false;var d=false;var aj=false;var i=false;var af=false;Brav1Toolbox.addClass(F,"ft-absolute-nav");if(!J){Brav1Toolbox.addListener(document,"click",U,false)}function U(aw){var ar=aw.target.getAttribute("href");if(ar&&ar.substr(0,1)=="#"){aw.preventDefault();var av=ar;var at=aa.setPage(av);X(at,null,true)}if(s&&Brav1Toolbox.hasClass(aw.target,D)){X(aw.target,null,true)}if(Brav1Toolbox.hasClass(aw.target,A)){var au=Number(W(aw.target.getAttribute("data-p")));var aq=Number(W(aw.target.getAttribute("data-sp")));q(au,aq)}}if(ac==false){window.onpopstate=c}function c(at){ac=false;var ar;if(at.state){ar=at.state.token.replace("#/","")}else{ar=document.location.hash.replace("#/","")}var aq=aa.setPage(ar);X(aq,false)}Brav1Toolbox.addListener(window,"hashchange",ak);function ak(at,au){if(ac||au){var ar=document.location.hash.replace("#/","");var aq=aa.setPage(ar);X(aq,false)}}var v=(function I(){var au=NaN;function ar(){aq();if(!s){au=setTimeout(at,300)}}function aq(){clearTimeout(au)}function at(){ak(null,true)}Brav1Toolbox.addListener(window,"resize",ar);return{enable:ar,disable:aq,}})();function p(ar){if(ar.length>0){var aq=ar.replace("#/","").split("/");var au=document.querySelector(w+"[data-id=__"+aq[0]+"]")||document.querySelector(w+"[data-prog=__"+aq[0]+"]");if(au!=null){var at=null;if(aq.length>1){at=au.querySelector(e+"[data-id=__"+aq[1]+"]")||au.querySelector(e+"[data-prog=__"+aq[1]+"]")}if(at==null){at=au.querySelector(e)}return at}}return}function g(){aa.update();ak(null,true)}function H(av){var au=Y;var aq=aa.getCurrentPage().getAttribute("data-title");if(aq==null){var at=av.split("/");for(var ar=0;ar<at.length;ar++){au+=" | "+at[ar]}}else{if(aa.getCurrentSection().getAttribute("data-title")!=null){au+=" | "+aa.getCurrentSection().getAttribute("data-title")}au+=" | "+aq}document.title=au}function N(aq){return(aq.getAttribute("data-id")!=null?aq.getAttribute("data-id").replace(/__/,""):aq.getAttribute("data-prog").replace(/__/,""))}function C(aq){if(aq.substr(0,2)!="__"){return"__"+aq}else{return aq}}function W(aq){if(aq.substr(0,2)=="__"){return aq.replace(/__/,"")}else{return aq}}function X(az,aw,ar){aw=aw==false?aw:true;if(!az){if(aa.getCurrentPage()!=null){az=aa.getCurrentPage()}else{az=document.querySelector(e)}aw=true}var ay;var ax;var at=aa.getPageIndex(az);if(d==true){ay=az.offsetLeft+az.parentNode.offsetLeft;ax=az.offsetTop+az.parentNode.offsetTop}else{ay=at.section;ax=at.page}ao(ay,ax);ai=at;var au=aa.getHash(az);if(ar==true){aa.updateFragments()}if(O&&aw!=false){var aq={token:au};var av="#/"+au;if(av!=b){b=av;window.history.pushState(aq,null,b)}}else{document.location.hash="/"+au}H(au);if(s){Q()}aa.switchActivePage(aa.getCurrentPage(),true);Brav1Toolbox.dispatchEvent("flowtimenavigation",{section:aa.getCurrentSection(),page:aa.getCurrentPage(),sectionIndex:at.section,pageIndex:at.page,prevSection:aa.hasPrevSection(),nextSection:aa.hasNextSection(),prev:aa.hasPrevPage(),next:aa.hasNextPage(),progress:aa.getProgress(),total:aa.getPagesTotalLength()});if(af){l()}}function ao(aq,ar){if(Brav1Toolbox.testCSS("transform")){if(d){Z.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-aq+"px) translateY("+-ar+"px)"}else{Z.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-aq*100+"%) translateY("+-ar*100+"%)"}}else{if(d){Z.style.top=-ar+"px";Z.style.left=-aq+"px"}else{Z.style.top=-ar*100+"%";Z.style.left=-aq*100+"%"}}}var R=null;var u=null;function r(){var ar=document.createDocumentFragment();R=document.createElement("div");R.className=a;ar.appendChild(R);for(var au=0;au<aa.getSectionsLength();au++){var aq=document.createElement("div");aq.className=n;var at=aa.getPages(au);for(var av=0;av<at.length;av++){var aw=document.createElement("div");aw.className=A;aw.setAttribute("data-p","__"+au);aw.setAttribute("data-sp","__"+av);aq.appendChild(aw)}R.appendChild(aq)}F.appendChild(R)}function V(){if(R!=null){F.removeChild(R);R=null}}function l(){if(R!=null){var au=R.querySelectorAll(K);for(var at=0;at<au.length;at++){var av=au[at];var ar=Number(W(av.getAttribute("data-p")));var aq=Number(W(av.getAttribute("data-sp")));if(ar==aa.getPageIndex().section&&aq==aa.getPageIndex().page){Brav1Toolbox.addClass(au[at],"actual")}else{Brav1Toolbox.removeClass(au[at],"actual")}}}}function al(aq){if(s){Q(aq)}else{an=aa.getCurrentPage();z()}}function Q(aq){s=false;Brav1Toolbox.removeClass(F,"ft-overview");aa.hideFragments();if(aq==true){X(an)}else{X()}}function z(){s=true;Brav1Toolbox.addClass(F,"ft-overview");aa.showFragments();if(aj==false){S(true)}else{P(true)}}function S(au){if(au){var at=100/aa.getSectionsLength();var ar=100/aa.getPagesLength();var av=Math.min(at,ar)*0.9;var aq=(100-aa.getSectionsLength()*av)/2;var aw=(100-aa.getPagesLength()*av)/2;Z.style[Brav1Toolbox.getPrefixed("transform")]="translate("+aq+"%, "+aw+"%) scale("+av/100+", "+av/100+")"}else{}}function P(ar){if(ar){var au=x;var at=aa.getPageIndex();var aq=50-(au*at.section)-(au/2);var av=50-(au*at.page)-(au/2);Z.style[Brav1Toolbox.getPrefixed("transform")]="translate("+aq+"%, "+av+"%) scale("+au/100+", "+au/100+")"}}Brav1Toolbox.addListener(window,"keydown",k);Brav1Toolbox.addListener(window,"keyup",f);function k(ar){var aq=ar.target.tagName;if(aq!="INPUT"&&aq!="TEXTAREA"&&aq!="SELECT"){if(ar.keyCode>=37&&ar.keyCode<=40){ar.preventDefault()}}}function f(at){var aq=at.target.tagName;var ar;if(aq!="INPUT"&&aq!="TEXTAREA"&&aq!="SELECT"){at.preventDefault();switch(at.keyCode){case 27:al(true);break;case 37:y(at.shiftKey);break;case 39:ae(at.shiftKey);break;case 38:t(at.shiftKey);break;case 40:E(at.shiftKey);break;case 13:if(s){q(aa.getCurrentHilited())}break;default:break}}}function ae(aq){var ar=aa.getNextSection(aq,ap,s);if(ar!=undefined){X(ar)}else{if(s&&aj){z()}}}function y(aq){var ar=aa.getPrevSection(aq,ap,s);if(ar!=undefined){X(ar)}else{if(s&&aj){z()}}}function E(aq){var ar=aa.getNextPage(aq,s);if(ar!=undefined){X(ar)}else{if(s&&aj){z()}}}function t(aq){var ar=aa.getPrevPage(aq,s);if(ar!=undefined){X(ar)}else{if(s&&aj){z()}}}function q(){var ar=q.arguments;if(ar.length>0){if(ar.length==1){if(Brav1Toolbox.typeOf(ar[0])==="Object"){var aw=ar[0];var av=aw.page;var au=aw.subPage;if(av!=null&&av!=undefined){var aq=document.querySelector(w+"[data-id="+C(av)+"]");if(au!=null&&au!=undefined){var at=aq.querySelector(e+"[data-id="+C(au)+"]");if(at!=null){X(at);return}}}}else{if(ar[0].nodeName!=undefined){X(ar[0],null,true)}}}else{if(Brav1Toolbox.typeOf(ar[0])==="Number"||ar[0]===0){var at=aa.getPageByIndex(ar[1],ar[0]);X(at);return}}}}var aa=(function(){var aZ;var aD;var aV;var aI;var aP=[];var aO=0;var bb=0;var aW=0;var a4=0;var aH=0;var a5=0;var aB=0;var aS;function at(){aD=[];aV=document.querySelectorAll(ag);aI=[];aZ=Z.querySelectorAll(".flowtime > "+w);for(var bf=0;bf<aZ.length;bf++){var bd=[];var bi=aZ[bf];aI[bf]=[];aP[bf]=[];if(bi.getAttribute("data-id")){bi.setAttribute("data-id","__"+bi.getAttribute("data-id"))}bi.setAttribute("data-prog","__"+(bf+1));bi.index=bf;var bc=bi.querySelectorAll(e);aW+=bc.length;bb=Math.max(bb,bc.length);for(var bg=0;bg<bc.length;bg++){var be=bc[bg];if(be.getAttribute("data-id")){be.setAttribute("data-id","__"+be.getAttribute("data-id"))}be.setAttribute("data-prog","__"+(bg+1));be.index=bg;bd.push(be);var bh=be.querySelectorAll(ag);aI[bf][bg]=bh;aP[bf][bg]=-1}aD.push(bd)}aO=aZ.length}function ax(be,bd,bf){var bc=aH;if(bd==true&&aI[a4][aH].length>0&&aP[a4][aH]<aI[a4][aH].length-1&&be!=true&&bf==false){aE(a4,aH)}else{bc=0;if(be!=true||T==true||a4+1>aD.length-1){bc=aH}a4=Math.min(a4+1,aD.length-1);return aU(aD[a4],bc,bf)}return a0(aD[a4][aH],bf)}function aX(be,bd,bf){var bc=aH;if(bd==true&&aI[a4][aH].length>0&&aP[a4][aH]>=0&&be!=true&&bf==false){a7(a4,aH)}else{var bc=0;if(be!=true||T==true||a4-1<0){bc=aH}a4=Math.max(a4-1,0);return aU(aD[a4],bc,bf)}return a0(aD[a4][aH],bf)}function aU(bg,bd,bf){var be=bg[bd];if(be==undefined){for(var bc=bd;bc>=0;bc--){if(bg[bc]!=undefined){be=bg[bc];bd=bc;break}}}aH=bd;aQ();return a0(be,bf)}function ar(bc,bd){if(aI[a4][aH].length>0&&aP[a4][aH]<aI[a4][aH].length-1&&bc!=true&&bd==false){aE(a4,aH)}else{if(aD[a4][aH+1]==undefined&&aD[a4+1]!=undefined){a4+=1;aH=0}else{aH=Math.min(aH+1,aD[a4].length-1)}}return a0(aD[a4][aH],bd)}function a8(bc,bd){if(aI[a4][aH].length>0&&aP[a4][aH]>=0&&bc!=true&&bd==false){a7(a4,aH)}else{if(aH==0&&aD[a4-1]!=undefined){a4-=1;aH=aD[a4].length-1}else{aH=Math.max(aH-1,0)}}return a0(aD[a4][aH],bd)}function a0(bc,bd){if(bd==true){au(bc);return}else{return bc}}function aE(bc,bd,be){if(be!=undefined){aP[bc][bd]=be}else{be=aP[bc][bd]+=1}Brav1Toolbox.addClass(aI[bc][bd][be],"revealed")}function a7(bc,bd,be){if(be!=undefined){aP[bc][bd]=be}else{be=aP[bc][bd]}Brav1Toolbox.removeClass(aI[bc][bd][be],"revealed");Brav1Toolbox.removeClass(aI[bc][bd][be],"revealed-temp");aP[bc][bd]-=1}function az(){for(var bc=0;bc<aV.length;bc++){Brav1Toolbox.addClass(aV[bc],"revealed-temp")}}function aK(){for(var bc=0;bc<aV.length;bc++){Brav1Toolbox.removeClass(aV[bc],"revealed-temp")}}function aQ(){for(var bg=0;bg<aI.length;bg++){var bd=aI[bg];for(var be=0;be<bd.length;be++){var bc=bd[be];if(bc.length>0){if(bg>a4){for(var bf=bc.length-1;bf>=0;bf--){a7(bg,be,bf)}}else{if(bg<a4){for(var bf=0;bf<bc.length;bf++){aE(bg,be,bf)}}else{if(bg==a4){if(be>aH){for(var bf=bc.length-1;bf>=0;bf--){a7(bg,be,bf)}}else{if(be<aH){for(var bf=0;bf<bc.length;bf++){aE(bg,be,bf)}}else{if(be==aH){for(var bf=0;bf<bc.length;bf++){if(T==false){a7(bg,be,bf)}else{if(ai.section>aa.getPageIndex().section){aE(bg,be,bf)}else{a7(bg,be,bf)}}}if(T==false){aP[bg][be]=-1}else{if(ai.section>aa.getPageIndex().section){aP[bg][be]=bf-1}else{aP[bg][be]=-1}}}}}}}}}}}}function aG(bc){if(bc){}return a4}function aq(bc){if(bc){}return aH}function a3(){return aZ}function aL(bc){return aD[bc]}function ba(){return aO}function aR(){return bb}function aN(){return aW}function aY(be){var bd=a4;var bc=aH;if(be!=undefined){bd=be.parentNode.index;bc=be.index}return{section:bd,page:bc}}function a6(bc){return aZ[bc]}function aJ(bc,bd){return aD[bd][bc]}function aA(){return aZ[a4]}function a1(){return aD[a4][aH]}function aM(){return a4<aZ.length-1}function ay(){return a4>0}function aC(){return aH<aD[a4].length-1}function aw(){return aH>0}function aT(){if(a4==0&&aH==0){return 0}var bd=0;for(var bc=0;bc<a4;bc++){bd+=aD[bc].length}bd+=aD[a4][aH].index+1;return bd}function a2(bf){if(bf!=undefined){aH=aY(bf).page;a4=aY(bf).section}var be="";var bc=aZ[a4];be+=N(bc);if(aD[a4].length>1){var bd=aD[a4][aH];be+="/"+N(bd)}return be}function av(bg){var bh=p(bg);if(bh){var bd=bh.parentNode;for(var bc=0;bc<aD.length;bc++){var bf=aD[bc];if(aZ[bc]===bd){a4=bc;for(var be=0;be<bf.length;be++){if(bf[be]===bh){aH=be;break}}}}aQ()}return bh}function au(bh,bc){for(var bd=0;bd<aD.length;bd++){var bf=aD[bd];for(var be=0;be<bf.length;be++){var bg=aD[bd][be];if(bg!==bh){Brav1Toolbox.removeClass(bg,"hilite");if(s==false&&bg!==a1()){Brav1Toolbox.removeClass(bg,"actual")}}}}Brav1Toolbox.addClass(bh,"hilite");if(bc){a9(bh)}aS=bh}function aF(){return aS}function a9(bc){Brav1Toolbox.addClass(bc,"actual")}at();return{update:at,updateFragments:aQ,showFragments:az,hideFragments:aK,getSection:aG,getPage:aq,getSections:a3,getPages:aL,getNextSection:ax,getPrevSection:aX,getNextPage:ar,getPrevPage:a8,getSectionsLength:ba,getPagesLength:aR,getPagesTotalLength:aN,getPageIndex:aY,getSectionByIndex:a6,getPageByIndex:aJ,getCurrentSection:aA,getCurrentPage:a1,getProgress:aT,getHash:a2,setPage:av,switchActivePage:au,getCurrentHilited:aF,hasNextSection:aM,hasPrevSection:ay,hasNextPage:aC,hasPrevPage:aw}})();function M(){if(af&&R==null){r()}if(document.location.hash.length>0){ak(null,true)}else{if(M.arguments.length>0){q.apply(this,M.arguments)}else{q(0,0);l()}}}function B(aq){ap=aq;L(aq)}function L(aq){T=aq}function ad(aq){O=aq}function h(aq){d=aq;X()}function o(aq){aj=aq}function m(aq){i=aq}function G(aq){af=aq;if(af){if(R==null){r()}l()}else{if(R!=null){V()}}}return{start:M,updateNavigation:g,nextSection:ae,prevSection:y,next:E,prev:t,nextFragment:E,prevFragment:t,gotoPage:q,toggleOverview:al,fragmentsOnSide:B,showFragmentsOnBack:L,useHistory:ad,slideWithPx:h,useOverviewVariant:o,twoStepsSlide:m,showProgress:G}})();