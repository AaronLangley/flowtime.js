/*!
 * Brav1Toolbox.js - common utility scripts and polyfills
 * http://marcolago.com/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Brav1Toolbox=(function(){var c=["","-webkit-","-moz-","-ms-","-o-"];var h;if(window.getComputedStyle){h=window.getComputedStyle(document.body)}else{h=document.documentElement.style}function j(l,n,m,k){if(l.addEventListener){l.addEventListener(n,m,k)}else{if(l.attachEvent){l.attachEvent(n,m)}}}function f(k){return i(k)!=""}function i(n){for(var k=0;k<c.length;k++){var m=c[k].replace(/-/g,"");var l=n;if(m.length>0){l=l.charAt(0).toUpperCase()+l.substr(1)}l=m+l;if(l in h==true){return l}}return""}function d(k){return !!k&&Object.prototype.toString.call(k).match(/(\w+)\]/)[1]}function g(l,m){if(l.classList){l.classList.add(m)}else{if(e(l,m)==false){var k=l.className;if(k.length>0){k+=" "}l.className=k+m}}}function a(l,m){if(l.classList){l.classList.remove(m)}else{var k=l.className;if(k.indexOf(m)!=-1){if(k.indexOf(" "+m)!=-1){k=k.replace(" "+m,"")}else{if(k.indexOf(m+" ")!=-1){k=k.replace(m+" ","")}else{k=k.replace(m,"")}}}l.className=k}}function e(k,l){if(k.classList){return k.classList.contains(l)}else{return k.className.indexOf(l)!=-1}}function b(k,n){if(document.createEvent){var m=document.createEvent("HTMLEvents");m.initEvent(k,true,true);for(var l in n){m[l]=n[l]}document.dispatchEvent(m)}}return{addListener:j,dispatchEvent:b,testCSS:f,getPrefixed:i,typeOf:d,addClass:g,removeClass:a,hasClass:e}})();
/*!
 * Flowtime.js
 * http://marcolago.com/flowtime-js/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Flowtime=(function(){var h="ontouchstart" in document.documentElement;var aj=window.history.pushState;var f="ft-section";var aq="."+f;var al="ft-page";var ak="."+al;var ah="ft-fragment";var q="."+ah;var R="revealed";var Y="revealed-temp";var S="ft-default-progress";var E="."+S;var N="ft-section-thumb";var w="."+N;var g="ft-page-thumb";var I="."+g;var l="flowtimenavigation";var A=document.querySelector(".flowtime");var m=document.querySelector("body");var ac=false;var O="";var t;var y=false;var ag=document.title;var F;var am=22;var ab=null;var n=false;var aa=false;var s=false;var D=false;var W=false;var au=false;var af=false;var z=true;try{var i=document.querySelector("html").className.toLowerCase();if(i.indexOf("ie7")!=-1||i.indexOf("ie8")!=-1||i.indexOf("lt-ie9")!=-1){z=false}}catch(M){z=false}if(z){Brav1Toolbox.addClass(m,"ft-absolute-nav")}if(z){Brav1Toolbox.addListener(document,"click",aA,false)}function aA(aG){var aC=aG.target.getAttribute("href");if(aC&&aC.substr(0,1)=="#"){aG.preventDefault();var aF=aC;var aD=p.setPage(aF);K(aD,null,true)}if(y&&Brav1Toolbox.hasClass(aG.target,al)){K(aG.target,null,true)}if(Brav1Toolbox.hasClass(aG.target,g)){var aE=Number(v(aG.target.getAttribute("data-p")));var aB=Number(v(aG.target.getAttribute("data-sp")));ae(aE,aB)}}if(ac==false){window.onpopstate=r}function r(aD){ac=false;var aC;if(aD.state){aC=aD.state.token.replace("#/","")}else{aC=document.location.hash.replace("#/","")}var aB=p.setPage(aC);K(aB,false)}Brav1Toolbox.addListener(window,"hashchange",B);function B(aD,aE){if(ac||aE){var aC=document.location.hash.replace("#/","");var aB=p.setPage(aC);K(aB,false)}}var d=(function ao(){var aD=NaN;function aB(){e();if(!y){aD=setTimeout(aC,300)}}function e(){clearTimeout(aD)}function aC(){B(null,true)}Brav1Toolbox.addListener(window,"resize",aB);return{enable:aB,disable:e,}})();function av(aB){if(aB.length>0){var e=aB.replace("#/","").split("/");var aD=document.querySelector(aq+"[data-id=__"+e[0]+"]")||document.querySelector(aq+"[data-prog=__"+e[0]+"]");if(aD!=null){var aC=null;if(e.length>1){aC=aD.querySelector(ak+"[data-id=__"+e[1]+"]")||aD.querySelector(ak+"[data-prog=__"+e[1]+"]")}if(aC==null){aC=aD.querySelector(ak)}return aC}}return}function an(){p.update();B(null,true)}function ax(aE){var aD=ag;var e=p.getCurrentPage().getAttribute("data-title");if(e==null){var aC=aE.split("/");for(var aB=0;aB<aC.length;aB++){aD+=" | "+aC[aB]}}else{if(p.getCurrentSection().getAttribute("data-title")!=null){aD+=" | "+p.getCurrentSection().getAttribute("data-title")}aD+=" | "+e}document.title=aD}function c(e){return(e.getAttribute("data-id")!=null?e.getAttribute("data-id").replace(/__/,""):e.getAttribute("data-prog").replace(/__/,""))}function ar(e){if(e.substr(0,2)!="__"){return"__"+e}else{return e}}function v(e){if(e.substr(0,2)=="__"){return e.replace(/__/,"")}else{return e}}function K(aI,aF,aB){aF=aF==false?aF:true;if(!aI){if(p.getCurrentPage()!=null){aI=p.getCurrentPage()}else{aI=document.querySelector(ak)}aF=true}var aH;var aG;var aC=p.getPageIndex(aI);if(s==true){aH=aI.offsetLeft+aI.parentNode.offsetLeft;aG=aI.offsetTop+aI.parentNode.offsetTop}else{aH=aC.section;aG=aC.page}x(aH,aG);t=aC;var aD=p.getHash(aI);if(aB==true){p.updateFragments()}if(aj&&aF!=false){var e={token:aD};var aE="#/"+aD;if(aE!=O){O=aE;window.history.pushState(e,null,O)}}else{document.location.hash="/"+aD}ax(aD);if(y){j()}p.switchActivePage(p.getCurrentPage(),true);Brav1Toolbox.dispatchEvent(l,{section:p.getCurrentSection(),page:p.getCurrentPage(),sectionIndex:aC.section,pageIndex:aC.page,prevSection:p.hasPrevSection(),nextSection:p.hasNextSection(),prevPage:p.hasPrevPage(),nextPage:p.hasNextPage(),fragment:p.getCurrentFragment(),fragmentIndex:p.getCurrentFragmentIndex(),progress:p.getProgress(),total:p.getPagesTotalLength()});if(af){az()}}function x(e,aB){if(Brav1Toolbox.testCSS("transform")){if(s){A.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-e+"px) translateY("+-aB+"px)"}else{A.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-e*100+"%) translateY("+-aB*100+"%)"}}else{if(s){A.style.top=-aB+"px";A.style.left=-e+"px"}else{A.style.top=-aB*100+"%";A.style.left=-e*100+"%"}}window.scrollTo(0,0)}var ab=null;var X=null;function at(){var aB=document.createDocumentFragment();ab=document.createElement("div");ab.className=S;aB.appendChild(ab);for(var aD=0;aD<p.getSectionsLength();aD++){var e=document.createElement("div");e.className=N;var aC=p.getPages(aD);for(var aE=0;aE<aC.length;aE++){var aF=document.createElement("div");aF.className=g;aF.setAttribute("data-p","__"+aD);aF.setAttribute("data-sp","__"+aE);e.appendChild(aF)}ab.appendChild(e)}m.appendChild(ab)}function o(){if(ab!=null){m.removeChild(ab);ab=null}}function az(){if(ab!=null){var aD=ab.querySelectorAll(I);for(var aC=0;aC<aD.length;aC++){var aE=aD[aC];var aB=Number(v(aE.getAttribute("data-p")));var e=Number(v(aE.getAttribute("data-sp")));if(aB==p.getPageIndex().section&&e==p.getPageIndex().page){Brav1Toolbox.addClass(aD[aC],"actual")}else{Brav1Toolbox.removeClass(aD[aC],"actual")}}}}function Q(e){if(y){j(e)}else{F=p.getCurrentPage();J()}}function j(e){y=false;Brav1Toolbox.removeClass(m,"ft-overview");p.hideFragments();if(e==true){K(F)}else{K()}}function J(){y=true;Brav1Toolbox.addClass(m,"ft-overview");p.showFragments();if(W==false){H(true)}else{G(true)}}function H(aD){if(aD){var aC=100/p.getSectionsLength();var aB=100/p.getPagesLength();var aE=Math.min(aC,aB)*0.9;var e=(100-p.getSectionsLength()*aE)/2;var aF=(100-p.getPagesLength()*aE)/2;A.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+aF+"%) scale("+aE/100+", "+aE/100+")"}else{}}function G(aB){if(aB){var aD=am;var aC=p.getPageIndex();var e=50-(aD*aC.section)-(aD/2);var aE=50-(aD*aC.page)-(aD/2);A.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+aE+"%) scale("+aD/100+", "+aD/100+")"}}Brav1Toolbox.addListener(window,"keydown",u);Brav1Toolbox.addListener(window,"keyup",Z);function u(aC){var aB=aC.target.tagName;if(aB!="INPUT"&&aB!="TEXTAREA"&&aB!="SELECT"){if(aC.keyCode>=37&&aC.keyCode<=40){aC.preventDefault()}}}function Z(aD){var aB=aD.target.tagName;var aC;if(aB!="INPUT"&&aB!="TEXTAREA"&&aB!="SELECT"){aD.preventDefault();switch(aD.keyCode){case 27:Q(true);break;case 37:b(aD.shiftKey);break;case 39:C(aD.shiftKey);break;case 38:ai(aD.shiftKey);break;case 40:P(aD.shiftKey);break;case 13:if(y){ae(p.getCurrentHilited())}break;default:break}}}function C(e){var aB=p.getNextSection(e,n,y);if(aB!=undefined){K(aB)}else{if(y&&W){J()}}}function b(e){var aB=p.getPrevSection(e,n,y);if(aB!=undefined){K(aB)}else{if(y&&W){J()}}}function P(e){var aB=p.getNextPage(e,y);if(aB!=undefined){K(aB)}else{if(y&&W){J()}}}function ai(e){var aB=p.getPrevPage(e,y);if(aB!=undefined){K(aB)}else{if(y&&W){J()}}}function ae(){var aB=ae.arguments;if(aB.length>0){if(aB.length==1){if(Brav1Toolbox.typeOf(aB[0])==="Object"){var aF=aB[0];var aE=aF.page;var aD=aF.subPage;if(aE!=null&&aE!=undefined){var e=document.querySelector(aq+"[data-id="+ar(aE)+"]");if(aD!=null&&aD!=undefined){var aC=e.querySelector(ak+"[data-id="+ar(aD)+"]");if(aC!=null){K(aC);return}}}}else{if(aB[0].nodeName!=undefined){K(aB[0],null,true)}}}else{if(Brav1Toolbox.typeOf(aB[0])==="Number"||aB[0]===0){var aC=p.getPageByIndex(aB[1],aB[0]);K(aC);return}}}}var p=(function(){var ba;var aN;var a6;var aS;var aZ=[];var aY=0;var bm=0;var a7=0;var bf=0;var aR=0;var bg=0;var aL=0;var a2;function aD(){aN=[];a6=document.querySelectorAll(q);aS=[];ba=A.querySelectorAll(".flowtime > "+aq);for(var bq=0;bq<ba.length;bq++){var bo=[];var bt=ba[bq];aS[bq]=[];aZ[bq]=[];if(bt.getAttribute("data-id")){bt.setAttribute("data-id","__"+bt.getAttribute("data-id"))}bt.setAttribute("data-prog","__"+(bq+1));bt.index=bq;bt.setAttribute("id","");var bn=bt.querySelectorAll(ak);a7+=bn.length;bm=Math.max(bm,bn.length);for(var br=0;br<bn.length;br++){var bp=bn[br];if(bp.getAttribute("data-id")){bp.setAttribute("data-id","__"+bp.getAttribute("data-id"))}bp.setAttribute("data-prog","__"+(br+1));bp.index=br;bp.setAttribute("id","");bo.push(bp);var bs=bp.querySelectorAll(q);aS[bq][br]=bs;aZ[bq][br]=-1}aN.push(bo)}aY=ba.length}function aH(bq,bp,br){var bo=aR;var bn=bq===!D;if(bp==true&&aS[bf][aR].length>0&&aZ[bf][aR]<aS[bf][aR].length-1&&bn!=true&&br==false){aO(bf,aR)}else{bo=0;if(bn!=true||aa==true||bf+1>aN.length-1){bo=aR}bf=Math.min(bf+1,aN.length-1);return a5(aN[bf],bo,br)}return bb(aN[bf][aR],br)}function a8(bq,bp,br){var bo=aR;var bn=bq==!D;if(bp==true&&aS[bf][aR].length>0&&aZ[bf][aR]>=0&&bn!=true&&br==false){bi(bf,aR)}else{var bo=0;if(bn!=true||aa==true||bf-1<0){bo=aR}bf=Math.max(bf-1,0);return a5(aN[bf],bo,br)}return bb(aN[bf][aR],br)}function a5(br,bo,bq){var bp=br[bo];if(bp==undefined){for(var bn=bo;bn>=0;bn--){if(br[bn]!=undefined){bp=br[bn];bo=bn;break}}}aR=bo;if(!y){a0()}return bb(bp,bq)}function aC(bn,bo){if(aS[bf][aR].length>0&&aZ[bf][aR]<aS[bf][aR].length-1&&bn!=true&&bo==false){aO(bf,aR)}else{if(aN[bf][aR+1]==undefined&&aN[bf+1]!=undefined){bf+=1;aR=0}else{aR=Math.min(aR+1,aN[bf].length-1)}}return bb(aN[bf][aR],bo)}function bj(bn,bo){if(aS[bf][aR].length>0&&aZ[bf][aR]>=0&&bn!=true&&bo==false){bi(bf,aR)}else{if(aR==0&&aN[bf-1]!=undefined){bf-=1;aR=aN[bf].length-1}else{aR=Math.max(aR-1,0)}}return bb(aN[bf][aR],bo)}function bb(bn,bo){if(bo==true){aE(bn);return}else{return bn}}function aO(bn,bo,bp){if(bp!=undefined){aZ[bn][bo]=bp}else{bp=aZ[bn][bo]+=1}Brav1Toolbox.addClass(aS[bn][bo][bp],R)}function bi(bn,bo,bp){if(bp!=undefined){aZ[bn][bo]=bp}else{bp=aZ[bn][bo]}Brav1Toolbox.removeClass(aS[bn][bo][bp],R);Brav1Toolbox.removeClass(aS[bn][bo][bp],Y);aZ[bn][bo]-=1}function aJ(){for(var bn=0;bn<a6.length;bn++){Brav1Toolbox.addClass(a6[bn],Y)}}function aU(){for(var bn=0;bn<a6.length;bn++){Brav1Toolbox.removeClass(a6[bn],Y)}}function a0(){for(var br=0;br<aS.length;br++){var bo=aS[br];for(var bp=0;bp<bo.length;bp++){var bn=bo[bp];if(bn.length>0){if(br>bf){for(var bq=bn.length-1;bq>=0;bq--){bi(br,bp,bq)}}else{if(br<bf){for(var bq=0;bq<bn.length;bq++){aO(br,bp,bq)}}else{if(br==bf){if(bp>aR){for(var bq=bn.length-1;bq>=0;bq--){bi(br,bp,bq)}}else{if(bp<aR){for(var bq=0;bq<bn.length;bq++){aO(br,bp,bq)}}else{if(bp==aR){for(var bq=0;bq<bn.length;bq++){if(aa==false){bi(br,bp,bq)}else{if(t.section>p.getPageIndex().section){aO(br,bp,bq)}else{bi(br,bp,bq)}}}if(aa==false){aZ[br][bp]=-1}else{if(t.section>p.getPageIndex().section){aZ[br][bp]=bq-1}else{aZ[br][bp]=-1}}}}}}}}}}}}function aQ(bn){if(bn){}return bf}function aB(bn){if(bn){}return aR}function be(){return ba}function aV(bn){return aN[bn]}function bl(){return aY}function a1(){return bm}function aX(){return a7}function a9(bp){var bo=bf;var bn=aR;if(bp!=undefined){bo=bp.parentNode.index;bn=bp.index}return{section:bo,page:bn}}function bh(bn){return ba[bn]}function aT(bn,bo){return aN[bo][bn]}function aK(){return ba[bf]}function bc(){return aN[bf][aR]}function a4(){return aS[bf][aR][e()]}function e(){return aZ[bf][aR]}function aW(){return bf<ba.length-1}function aI(){return bf>0}function aM(){return aR<aN[bf].length-1}function aG(){return aR>0}function a3(){if(bf==0&&aR==0){return 0}var bo=0;for(var bn=0;bn<bf;bn++){bo+=aN[bn].length}bo+=aN[bf][aR].index+1;return bo}function bd(bq){if(bq!=undefined){aR=a9(bq).page;bf=a9(bq).section}var bp="";var bn=ba[bf];bp+=c(bn);if(aN[bf].length>1){var bo=aN[bf][aR];bp+="/"+c(bo)}return bp}function aF(br){var bs=av(br);if(bs){var bo=bs.parentNode;for(var bn=0;bn<aN.length;bn++){var bq=aN[bn];if(ba[bn]===bo){bf=bn;for(var bp=0;bp<bq.length;bp++){if(bq[bp]===bs){aR=bp;break}}}}a0()}return bs}function aE(bs,bn){for(var bo=0;bo<aN.length;bo++){var bq=aN[bo];for(var bp=0;bp<bq.length;bp++){var br=aN[bo][bp];if(br!==bs){Brav1Toolbox.removeClass(br,"hilite");if(y==false&&br!==bc()){Brav1Toolbox.removeClass(br,"actual")}}}}Brav1Toolbox.addClass(bs,"hilite");if(bn){bk(bs)}a2=bs}function aP(){return a2}function bk(bn){Brav1Toolbox.addClass(bn,"actual")}aD();return{update:aD,updateFragments:a0,showFragments:aJ,hideFragments:aU,getSection:aQ,getPage:aB,getSections:be,getPages:aV,getNextSection:aH,getPrevSection:a8,getNextPage:aC,getPrevPage:bj,getSectionsLength:bl,getPagesLength:a1,getPagesTotalLength:aX,getPageIndex:a9,getSectionByIndex:bh,getPageByIndex:aT,getCurrentSection:aK,getCurrentPage:bc,getCurrentFragment:a4,getCurrentFragmentIndex:e,getProgress:a3,getHash:bd,setPage:aF,switchActivePage:aE,getCurrentHilited:aP,hasNextSection:aW,hasPrevSection:aI,hasNextPage:aM,hasPrevPage:aG}})();function a(){if(af&&ab==null){at()}if(document.location.hash.length>0){B(null,true)}else{if(a.arguments.length>0){ae.apply(this,a.arguments)}else{ae(0,0);az()}}}function V(e){n=e;ad(e)}function ad(e){aa=e}function aw(e){aj=e}function ay(e){s=e;K()}function k(e){D=e}function L(e){W=e}function U(e){au=e}function ap(e){af=e;if(af){if(ab==null){at()}az()}else{if(ab!=null){o()}}}function T(aC,aB,e){Brav1Toolbox.addListener(document,aC,aB,e)}return{start:a,updateNavigation:an,nextSection:C,prevSection:b,next:P,prev:ai,nextFragment:P,prevFragment:ai,gotoPage:ae,toggleOverview:Q,fragmentsOnSide:V,showFragmentsOnBack:ad,useHistory:aw,slideInPx:ay,sectionsSlideToTop:k,useOverviewVariant:L,twoStepsSlide:U,showProgress:ap,addEventListener:T}})();