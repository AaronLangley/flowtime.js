/*!
 * Brav1Toolbox.js - common utility scripts and polyfills
 * http://marcolago.com/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Brav1Toolbox=(function(){var c=["","-webkit-","-moz-","-ms-","-o-"];var h;if(window.getComputedStyle){h=window.getComputedStyle(document.body)}else{h=document.documentElement.style}function j(l,n,m,k){if(l.addEventListener){l.addEventListener(n,m,k)}else{if(l.attachEvent){l.attachEvent(n,m)}}}function f(k){return i(k)!=""}function i(n){for(var k=0;k<c.length;k++){var m=c[k].replace(/-/g,"");var l=n;if(m.length>0){l=l.charAt(0).toUpperCase()+l.substr(1)}l=m+l;if(l in h==true){return l}}return""}function d(k){return !!k&&Object.prototype.toString.call(k).match(/(\w+)\]/)[1]}function g(l,m){if(l.classList){l.classList.add(m)}else{if(e(l,m)==false){var k=l.className;if(k.length>0){k+=" "}l.className=k+m}}}function a(l,m){if(l.classList){l.classList.remove(m)}else{var k=l.className;if(k.indexOf(m)!=-1){if(k.indexOf(" "+m)!=-1){k=k.replace(" "+m,"")}else{if(k.indexOf(m+" ")!=-1){k=k.replace(m+" ","")}else{k=k.replace(m,"")}}}l.className=k}}function e(k,l){if(k.classList){return k.classList.contains(l)}else{return k.className.indexOf(l)!=-1}}function b(k,n){if(document.createEvent){var m=document.createEvent("HTMLEvents");m.initEvent(k,true,true);for(var l in n){m[l]=n[l]}document.dispatchEvent(m)}}return{addListener:j,dispatchEvent:b,testCSS:f,getPrefixed:i,typeOf:d,addClass:g,removeClass:a,hasClass:e}})();
/*!
 * Flowtime.js
 * http://marcolago.com/flowtime-js/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Flowtime=(function(){var h="ontouchstart" in document.documentElement;var ag=window.history.pushState;var f="ft-section";var an="."+f;var ai="ft-page";var ah="."+ai;var ae="ft-fragment";var p="."+ae;var Q="ft-default-progress";var D="."+Q;var M="ft-section-thumb";var v="."+M;var g="ft-page-thumb";var H="."+g;var z=document.querySelector(".flowtime");var l=document.querySelector("body");var Z=false;var N="";var s;var x=false;var ad=document.title;var E;var aj=22;var Y=null;var m=false;var X=false;var r=false;var C=false;var U=false;var aq=false;var ac=false;var y=true;try{var i=document.querySelector("html").className.toLowerCase();if(i.indexOf("ie7")!=-1||i.indexOf("ie8")!=-1||i.indexOf("lt-ie9")!=-1){y=false}}catch(L){y=false}if(y){Brav1Toolbox.addClass(l,"ft-absolute-nav")}if(y){Brav1Toolbox.addListener(document,"click",ax,false)}function ax(aD){var az=aD.target.getAttribute("href");if(az&&az.substr(0,1)=="#"){aD.preventDefault();var aC=az;var aA=o.setPage(aC);J(aA,null,true)}if(x&&Brav1Toolbox.hasClass(aD.target,ai)){J(aD.target,null,true)}if(Brav1Toolbox.hasClass(aD.target,g)){var aB=Number(u(aD.target.getAttribute("data-p")));var ay=Number(u(aD.target.getAttribute("data-sp")));ab(aB,ay)}}if(Z==false){window.onpopstate=q}function q(aA){Z=false;var az;if(aA.state){az=aA.state.token.replace("#/","")}else{az=document.location.hash.replace("#/","")}var ay=o.setPage(az);J(ay,false)}Brav1Toolbox.addListener(window,"hashchange",A);function A(aA,aB){if(Z||aB){var az=document.location.hash.replace("#/","");var ay=o.setPage(az);J(ay,false)}}var d=(function al(){var aA=NaN;function ay(){e();if(!x){aA=setTimeout(az,300)}}function e(){clearTimeout(aA)}function az(){A(null,true)}Brav1Toolbox.addListener(window,"resize",ay);return{enable:ay,disable:e,}})();function ar(ay){if(ay.length>0){var e=ay.replace("#/","").split("/");var aA=document.querySelector(an+"[data-id=__"+e[0]+"]")||document.querySelector(an+"[data-prog=__"+e[0]+"]");if(aA!=null){var az=null;if(e.length>1){az=aA.querySelector(ah+"[data-id=__"+e[1]+"]")||aA.querySelector(ah+"[data-prog=__"+e[1]+"]")}if(az==null){az=aA.querySelector(ah)}return az}}return}function ak(){o.update();A(null,true)}function au(aB){var aA=ad;var e=o.getCurrentPage().getAttribute("data-title");if(e==null){var az=aB.split("/");for(var ay=0;ay<az.length;ay++){aA+=" | "+az[ay]}}else{if(o.getCurrentSection().getAttribute("data-title")!=null){aA+=" | "+o.getCurrentSection().getAttribute("data-title")}aA+=" | "+e}document.title=aA}function c(e){return(e.getAttribute("data-id")!=null?e.getAttribute("data-id").replace(/__/,""):e.getAttribute("data-prog").replace(/__/,""))}function ao(e){if(e.substr(0,2)!="__"){return"__"+e}else{return e}}function u(e){if(e.substr(0,2)=="__"){return e.replace(/__/,"")}else{return e}}function J(aF,aC,ay){aC=aC==false?aC:true;if(!aF){if(o.getCurrentPage()!=null){aF=o.getCurrentPage()}else{aF=document.querySelector(ah)}aC=true}var aE;var aD;var az=o.getPageIndex(aF);if(r==true){aE=aF.offsetLeft+aF.parentNode.offsetLeft;aD=aF.offsetTop+aF.parentNode.offsetTop}else{aE=az.section;aD=az.page}w(aE,aD);s=az;var aA=o.getHash(aF);if(ay==true){o.updateFragments()}if(ag&&aC!=false){var e={token:aA};var aB="#/"+aA;if(aB!=N){N=aB;window.history.pushState(e,null,N)}}else{document.location.hash="/"+aA}au(aA);if(x){j()}o.switchActivePage(o.getCurrentPage(),true);Brav1Toolbox.dispatchEvent("flowtimenavigation",{section:o.getCurrentSection(),page:o.getCurrentPage(),sectionIndex:az.section,pageIndex:az.page,prevSection:o.hasPrevSection(),nextSection:o.hasNextSection(),prev:o.hasPrevPage(),next:o.hasNextPage(),progress:o.getProgress(),total:o.getPagesTotalLength()});if(ac){aw()}}function w(e,ay){if(Brav1Toolbox.testCSS("transform")){if(r){z.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-e+"px) translateY("+-ay+"px)"}else{z.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-e*100+"%) translateY("+-ay*100+"%)"}}else{if(r){z.style.top=-ay+"px";z.style.left=-e+"px"}else{z.style.top=-ay*100+"%";z.style.left=-e*100+"%"}}window.scrollTo(0,0)}var Y=null;var V=null;function ap(){var ay=document.createDocumentFragment();Y=document.createElement("div");Y.className=Q;ay.appendChild(Y);for(var aA=0;aA<o.getSectionsLength();aA++){var e=document.createElement("div");e.className=M;var az=o.getPages(aA);for(var aB=0;aB<az.length;aB++){var aC=document.createElement("div");aC.className=g;aC.setAttribute("data-p","__"+aA);aC.setAttribute("data-sp","__"+aB);e.appendChild(aC)}Y.appendChild(e)}l.appendChild(Y)}function n(){if(Y!=null){l.removeChild(Y);Y=null}}function aw(){if(Y!=null){var aA=Y.querySelectorAll(H);for(var az=0;az<aA.length;az++){var aB=aA[az];var ay=Number(u(aB.getAttribute("data-p")));var e=Number(u(aB.getAttribute("data-sp")));if(ay==o.getPageIndex().section&&e==o.getPageIndex().page){Brav1Toolbox.addClass(aA[az],"actual")}else{Brav1Toolbox.removeClass(aA[az],"actual")}}}}function P(e){if(x){j(e)}else{E=o.getCurrentPage();I()}}function j(e){x=false;Brav1Toolbox.removeClass(l,"ft-overview");o.hideFragments();if(e==true){J(E)}else{J()}}function I(){x=true;Brav1Toolbox.addClass(l,"ft-overview");o.showFragments();if(U==false){G(true)}else{F(true)}}function G(aA){if(aA){var az=100/o.getSectionsLength();var ay=100/o.getPagesLength();var aB=Math.min(az,ay)*0.9;var e=(100-o.getSectionsLength()*aB)/2;var aC=(100-o.getPagesLength()*aB)/2;z.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+aC+"%) scale("+aB/100+", "+aB/100+")"}else{}}function F(ay){if(ay){var aA=aj;var az=o.getPageIndex();var e=50-(aA*az.section)-(aA/2);var aB=50-(aA*az.page)-(aA/2);z.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+aB+"%) scale("+aA/100+", "+aA/100+")"}}Brav1Toolbox.addListener(window,"keydown",t);Brav1Toolbox.addListener(window,"keyup",W);function t(az){var ay=az.target.tagName;if(ay!="INPUT"&&ay!="TEXTAREA"&&ay!="SELECT"){if(az.keyCode>=37&&az.keyCode<=40){az.preventDefault()}}}function W(aA){var ay=aA.target.tagName;var az;if(ay!="INPUT"&&ay!="TEXTAREA"&&ay!="SELECT"){aA.preventDefault();switch(aA.keyCode){case 27:P(true);break;case 37:b(aA.shiftKey);break;case 39:B(aA.shiftKey);break;case 38:af(aA.shiftKey);break;case 40:O(aA.shiftKey);break;case 13:if(x){ab(o.getCurrentHilited())}break;default:break}}}function B(e){var ay=o.getNextSection(e,m,x);if(ay!=undefined){J(ay)}else{if(x&&U){I()}}}function b(e){var ay=o.getPrevSection(e,m,x);if(ay!=undefined){J(ay)}else{if(x&&U){I()}}}function O(e){var ay=o.getNextPage(e,x);if(ay!=undefined){J(ay)}else{if(x&&U){I()}}}function af(e){var ay=o.getPrevPage(e,x);if(ay!=undefined){J(ay)}else{if(x&&U){I()}}}function ab(){var ay=ab.arguments;if(ay.length>0){if(ay.length==1){if(Brav1Toolbox.typeOf(ay[0])==="Object"){var aC=ay[0];var aB=aC.page;var aA=aC.subPage;if(aB!=null&&aB!=undefined){var e=document.querySelector(an+"[data-id="+ao(aB)+"]");if(aA!=null&&aA!=undefined){var az=e.querySelector(ah+"[data-id="+ao(aA)+"]");if(az!=null){J(az);return}}}}else{if(ay[0].nodeName!=undefined){J(ay[0],null,true)}}}else{if(Brav1Toolbox.typeOf(ay[0])==="Number"||ay[0]===0){var az=o.getPageByIndex(ay[1],ay[0]);J(az);return}}}}var o=(function(){var a5;var aJ;var a1;var aO;var aV=[];var aU=0;var bh=0;var a2=0;var ba=0;var aN=0;var bb=0;var aH=0;var aY;function az(){aJ=[];a1=document.querySelectorAll(p);aO=[];a5=z.querySelectorAll(".flowtime > "+an);for(var bl=0;bl<a5.length;bl++){var bj=[];var bo=a5[bl];aO[bl]=[];aV[bl]=[];if(bo.getAttribute("data-id")){bo.setAttribute("data-id","__"+bo.getAttribute("data-id"))}bo.setAttribute("data-prog","__"+(bl+1));bo.index=bl;bo.setAttribute("id","");var bi=bo.querySelectorAll(ah);a2+=bi.length;bh=Math.max(bh,bi.length);for(var bm=0;bm<bi.length;bm++){var bk=bi[bm];if(bk.getAttribute("data-id")){bk.setAttribute("data-id","__"+bk.getAttribute("data-id"))}bk.setAttribute("data-prog","__"+(bm+1));bk.index=bm;bk.setAttribute("id","");bj.push(bk);var bn=bk.querySelectorAll(p);aO[bl][bm]=bn;aV[bl][bm]=-1}aJ.push(bj)}aU=a5.length}function aD(bl,bk,bm){var bj=aN;var bi=bl===!C;if(bk==true&&aO[ba][aN].length>0&&aV[ba][aN]<aO[ba][aN].length-1&&bi!=true&&bm==false){aK(ba,aN)}else{bj=0;if(bi!=true||X==true||ba+1>aJ.length-1){bj=aN}ba=Math.min(ba+1,aJ.length-1);return a0(aJ[ba],bj,bm)}return a6(aJ[ba][aN],bm)}function a3(bl,bk,bm){var bj=aN;var bi=bl==!C;if(bk==true&&aO[ba][aN].length>0&&aV[ba][aN]>=0&&bi!=true&&bm==false){bd(ba,aN)}else{var bj=0;if(bi!=true||X==true||ba-1<0){bj=aN}ba=Math.max(ba-1,0);return a0(aJ[ba],bj,bm)}return a6(aJ[ba][aN],bm)}function a0(bm,bj,bl){var bk=bm[bj];if(bk==undefined){for(var bi=bj;bi>=0;bi--){if(bm[bi]!=undefined){bk=bm[bi];bj=bi;break}}}aN=bj;aW();return a6(bk,bl)}function ay(bi,bj){if(aO[ba][aN].length>0&&aV[ba][aN]<aO[ba][aN].length-1&&bi!=true&&bj==false){aK(ba,aN)}else{if(aJ[ba][aN+1]==undefined&&aJ[ba+1]!=undefined){ba+=1;aN=0}else{aN=Math.min(aN+1,aJ[ba].length-1)}}return a6(aJ[ba][aN],bj)}function be(bi,bj){if(aO[ba][aN].length>0&&aV[ba][aN]>=0&&bi!=true&&bj==false){bd(ba,aN)}else{if(aN==0&&aJ[ba-1]!=undefined){ba-=1;aN=aJ[ba].length-1}else{aN=Math.max(aN-1,0)}}return a6(aJ[ba][aN],bj)}function a6(bi,bj){if(bj==true){aA(bi);return}else{return bi}}function aK(bi,bj,bk){if(bk!=undefined){aV[bi][bj]=bk}else{bk=aV[bi][bj]+=1}Brav1Toolbox.addClass(aO[bi][bj][bk],"revealed")}function bd(bi,bj,bk){if(bk!=undefined){aV[bi][bj]=bk}else{bk=aV[bi][bj]}Brav1Toolbox.removeClass(aO[bi][bj][bk],"revealed");Brav1Toolbox.removeClass(aO[bi][bj][bk],"revealed-temp");aV[bi][bj]-=1}function aF(){for(var bi=0;bi<a1.length;bi++){Brav1Toolbox.addClass(a1[bi],"revealed-temp")}}function aQ(){for(var bi=0;bi<a1.length;bi++){Brav1Toolbox.removeClass(a1[bi],"revealed-temp")}}function aW(){for(var bm=0;bm<aO.length;bm++){var bj=aO[bm];for(var bk=0;bk<bj.length;bk++){var bi=bj[bk];if(bi.length>0){if(bm>ba){for(var bl=bi.length-1;bl>=0;bl--){bd(bm,bk,bl)}}else{if(bm<ba){for(var bl=0;bl<bi.length;bl++){aK(bm,bk,bl)}}else{if(bm==ba){if(bk>aN){for(var bl=bi.length-1;bl>=0;bl--){bd(bm,bk,bl)}}else{if(bk<aN){for(var bl=0;bl<bi.length;bl++){aK(bm,bk,bl)}}else{if(bk==aN){for(var bl=0;bl<bi.length;bl++){if(X==false){bd(bm,bk,bl)}else{if(s.section>o.getPageIndex().section){aK(bm,bk,bl)}else{bd(bm,bk,bl)}}}if(X==false){aV[bm][bk]=-1}else{if(s.section>o.getPageIndex().section){aV[bm][bk]=bl-1}else{aV[bm][bk]=-1}}}}}}}}}}}}function aM(bi){if(bi){}return ba}function e(bi){if(bi){}return aN}function a9(){return a5}function aR(bi){return aJ[bi]}function bg(){return aU}function aX(){return bh}function aT(){return a2}function a4(bk){var bj=ba;var bi=aN;if(bk!=undefined){bj=bk.parentNode.index;bi=bk.index}return{section:bj,page:bi}}function bc(bi){return a5[bi]}function aP(bi,bj){return aJ[bj][bi]}function aG(){return a5[ba]}function a7(){return aJ[ba][aN]}function aS(){return ba<a5.length-1}function aE(){return ba>0}function aI(){return aN<aJ[ba].length-1}function aC(){return aN>0}function aZ(){if(ba==0&&aN==0){return 0}var bj=0;for(var bi=0;bi<ba;bi++){bj+=aJ[bi].length}bj+=aJ[ba][aN].index+1;return bj}function a8(bl){if(bl!=undefined){aN=a4(bl).page;ba=a4(bl).section}var bk="";var bi=a5[ba];bk+=c(bi);if(aJ[ba].length>1){var bj=aJ[ba][aN];bk+="/"+c(bj)}return bk}function aB(bm){var bn=ar(bm);if(bn){var bj=bn.parentNode;for(var bi=0;bi<aJ.length;bi++){var bl=aJ[bi];if(a5[bi]===bj){ba=bi;for(var bk=0;bk<bl.length;bk++){if(bl[bk]===bn){aN=bk;break}}}}aW()}return bn}function aA(bn,bi){for(var bj=0;bj<aJ.length;bj++){var bl=aJ[bj];for(var bk=0;bk<bl.length;bk++){var bm=aJ[bj][bk];if(bm!==bn){Brav1Toolbox.removeClass(bm,"hilite");if(x==false&&bm!==a7()){Brav1Toolbox.removeClass(bm,"actual")}}}}Brav1Toolbox.addClass(bn,"hilite");if(bi){bf(bn)}aY=bn}function aL(){return aY}function bf(bi){Brav1Toolbox.addClass(bi,"actual")}az();return{update:az,updateFragments:aW,showFragments:aF,hideFragments:aQ,getSection:aM,getPage:e,getSections:a9,getPages:aR,getNextSection:aD,getPrevSection:a3,getNextPage:ay,getPrevPage:be,getSectionsLength:bg,getPagesLength:aX,getPagesTotalLength:aT,getPageIndex:a4,getSectionByIndex:bc,getPageByIndex:aP,getCurrentSection:aG,getCurrentPage:a7,getProgress:aZ,getHash:a8,setPage:aB,switchActivePage:aA,getCurrentHilited:aL,hasNextSection:aS,hasPrevSection:aE,hasNextPage:aI,hasPrevPage:aC}})();function a(){if(ac&&Y==null){ap()}if(document.location.hash.length>0){A(null,true)}else{if(a.arguments.length>0){ab.apply(this,a.arguments)}else{ab(0,0);aw()}}}function T(e){m=e;aa(e)}function aa(e){X=e}function at(e){ag=e}function av(e){r=e;J()}function k(e){C=e}function K(e){U=e}function S(e){aq=e}function am(e){ac=e;if(ac){if(Y==null){ap()}aw()}else{if(Y!=null){n()}}}function R(az,ay,e){Brav1Toolbox.addListener(document,az,ay,e)}return{start:a,updateNavigation:ak,nextSection:B,prevSection:b,next:O,prev:af,nextFragment:O,prevFragment:af,gotoPage:ab,toggleOverview:P,fragmentsOnSide:T,showFragmentsOnBack:aa,useHistory:at,slideInPx:av,sectionsSlideToTop:k,useOverviewVariant:K,twoStepsSlide:S,showProgress:am,addEventListener:R}})();