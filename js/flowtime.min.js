/*!
 * Brav1Toolbox.js - common utility scripts and polyfills
 * http://marcolago.com/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Brav1Toolbox=(function(){var c=["","-webkit-","-moz-","-ms-","-o-"];var h;if(window.getComputedStyle){h=window.getComputedStyle(document.body)}else{h=document.documentElement.style}function j(l,n,m,k){if(l.addEventListener){l.addEventListener(n,m,k)}else{if(l.attachEvent){l.attachEvent(n,m)}}}function f(k){return i(k)!=""}function i(n){for(var k=0;k<c.length;k++){var m=c[k].replace(/-/g,"");var l=n;if(m.length>0){l=l.charAt(0).toUpperCase()+l.substr(1)}l=m+l;if(l in h==true){return l}}return""}function d(k){return !!k&&Object.prototype.toString.call(k).match(/(\w+)\]/)[1]}function g(l,m){if(l.classList){l.classList.add(m)}else{if(e(l,m)==false){var k=l.className;if(k.length>0){k+=" "}l.className=k+m}}}function a(l,m){if(l.classList){l.classList.remove(m)}else{var k=l.className;if(k.indexOf(m)!=-1){if(k.indexOf(" "+m)!=-1){k=k.replace(" "+m,"")}else{if(k.indexOf(m+" ")!=-1){k=k.replace(m+" ","")}else{k=k.replace(m,"")}}}l.className=k}}function e(k,l){if(k.classList){return k.classList.contains(l)}else{return k.className.indexOf(l)!=-1}}function b(k,n){if(document.createEvent){var m=document.createEvent("HTMLEvents");m.initEvent(k,true,true);for(var l in n){m[l]=n[l]}document.dispatchEvent(m)}}return{addListener:j,dispatchEvent:b,testCSS:f,getPrefixed:i,typeOf:d,addClass:g,removeClass:a,hasClass:e}})();
/*!
 * Flowtime.js
 * http://marcolago.com/flowtime-js/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Flowtime=(function(){var L="ontouchstart" in document.documentElement;var Q=window.history.pushState;var aq="ft-section";var x="."+aq;var F="ft-page";var f="."+F;var ae="ft-fragment";var aj="."+ae;var a="ft-default-progress";var ak="."+a;var o="ft-section-thumb";var k="."+o;var B="ft-page-thumb";var M="."+B;var ac=document.querySelector(".flowtime");var H=document.querySelector("body");var af=false;var b="";var al;var t=false;var ab=document.title;var ar;var y=22;var T=null;var au=false;var V=false;var d=false;var am=false;var j=false;var ai=false;var aa=true;try{var E=document.querySelector("html").className.toLowerCase();if(E.indexOf("ie7")!=-1||E.indexOf("ie8")!=-1||E.indexOf("lt-ie9")!=-1){aa=false}}catch(ap){aa=false}if(aa){Brav1Toolbox.addClass(H,"ft-absolute-nav")}if(!L&&aa){Brav1Toolbox.addListener(document,"click",W,false)}function W(aA){var aw=aA.target.getAttribute("href");if(aw&&aw.substr(0,1)=="#"){aA.preventDefault();var az=aw;var ax=ad.setPage(az);Z(ax,null,true)}if(t&&Brav1Toolbox.hasClass(aA.target,F)){Z(aA.target,null,true)}if(Brav1Toolbox.hasClass(aA.target,B)){var ay=Number(Y(aA.target.getAttribute("data-p")));var av=Number(Y(aA.target.getAttribute("data-sp")));r(ay,av)}}if(af==false){window.onpopstate=c}function c(ax){af=false;var aw;if(ax.state){aw=ax.state.token.replace("#/","")}else{aw=document.location.hash.replace("#/","")}var av=ad.setPage(aw);Z(av,false)}Brav1Toolbox.addListener(window,"hashchange",an);function an(ax,ay){if(af||ay){var aw=document.location.hash.replace("#/","");var av=ad.setPage(aw);Z(av,false)}}var w=(function K(){var ax=NaN;function av(){e();if(!t){ax=setTimeout(aw,300)}}function e(){clearTimeout(ax)}function aw(){an(null,true)}Brav1Toolbox.addListener(window,"resize",av);return{enable:av,disable:e,}})();function q(av){if(av.length>0){var e=av.replace("#/","").split("/");var ax=document.querySelector(x+"[data-id=__"+e[0]+"]")||document.querySelector(x+"[data-prog=__"+e[0]+"]");if(ax!=null){var aw=null;if(e.length>1){aw=ax.querySelector(f+"[data-id=__"+e[1]+"]")||ax.querySelector(f+"[data-prog=__"+e[1]+"]")}if(aw==null){aw=ax.querySelector(f)}return aw}}return}function h(){ad.update();an(null,true)}function J(ay){var ax=ab;var e=ad.getCurrentPage().getAttribute("data-title");if(e==null){var aw=ay.split("/");for(var av=0;av<aw.length;av++){ax+=" | "+aw[av]}}else{if(ad.getCurrentSection().getAttribute("data-title")!=null){ax+=" | "+ad.getCurrentSection().getAttribute("data-title")}ax+=" | "+e}document.title=ax}function P(e){return(e.getAttribute("data-id")!=null?e.getAttribute("data-id").replace(/__/,""):e.getAttribute("data-prog").replace(/__/,""))}function D(e){if(e.substr(0,2)!="__"){return"__"+e}else{return e}}function Y(e){if(e.substr(0,2)=="__"){return e.replace(/__/,"")}else{return e}}function Z(aC,az,av){az=az==false?az:true;if(!aC){if(ad.getCurrentPage()!=null){aC=ad.getCurrentPage()}else{aC=document.querySelector(f)}az=true}var aB;var aA;var aw=ad.getPageIndex(aC);if(d==true){aB=aC.offsetLeft+aC.parentNode.offsetLeft;aA=aC.offsetTop+aC.parentNode.offsetTop}else{aB=aw.section;aA=aw.page}at(aB,aA);al=aw;var ax=ad.getHash(aC);if(av==true){ad.updateFragments()}if(Q&&az!=false){var e={token:ax};var ay="#/"+ax;if(ay!=b){b=ay;window.history.pushState(e,null,b)}}else{document.location.hash="/"+ax}J(ax);if(t){S()}ad.switchActivePage(ad.getCurrentPage(),true);Brav1Toolbox.dispatchEvent("flowtimenavigation",{section:ad.getCurrentSection(),page:ad.getCurrentPage(),sectionIndex:aw.section,pageIndex:aw.page,prevSection:ad.hasPrevSection(),nextSection:ad.hasNextSection(),prev:ad.hasPrevPage(),next:ad.hasNextPage(),progress:ad.getProgress(),total:ad.getPagesTotalLength()});if(ai){m()}}function at(e,av){if(Brav1Toolbox.testCSS("transform")){if(d){ac.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-e+"px) translateY("+-av+"px)"}else{ac.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-e*100+"%) translateY("+-av*100+"%)"}}else{if(d){ac.style.top=-av+"px";ac.style.left=-e+"px"}else{ac.style.top=-av*100+"%";ac.style.left=-e*100+"%"}}window.scrollTo(0,0)}var T=null;var v=null;function s(){var av=document.createDocumentFragment();T=document.createElement("div");T.className=a;av.appendChild(T);for(var ax=0;ax<ad.getSectionsLength();ax++){var e=document.createElement("div");e.className=o;var aw=ad.getPages(ax);for(var ay=0;ay<aw.length;ay++){var az=document.createElement("div");az.className=B;az.setAttribute("data-p","__"+ax);az.setAttribute("data-sp","__"+ay);e.appendChild(az)}T.appendChild(e)}H.appendChild(T)}function X(){if(T!=null){H.removeChild(T);T=null}}function m(){if(T!=null){var ax=T.querySelectorAll(M);for(var aw=0;aw<ax.length;aw++){var ay=ax[aw];var av=Number(Y(ay.getAttribute("data-p")));var e=Number(Y(ay.getAttribute("data-sp")));if(av==ad.getPageIndex().section&&e==ad.getPageIndex().page){Brav1Toolbox.addClass(ax[aw],"actual")}else{Brav1Toolbox.removeClass(ax[aw],"actual")}}}}function ao(e){if(t){S(e)}else{ar=ad.getCurrentPage();A()}}function S(e){t=false;Brav1Toolbox.removeClass(H,"ft-overview");ad.hideFragments();if(e==true){Z(ar)}else{Z()}}function A(){t=true;Brav1Toolbox.addClass(H,"ft-overview");ad.showFragments();if(am==false){U(true)}else{R(true)}}function U(ax){if(ax){var aw=100/ad.getSectionsLength();var av=100/ad.getPagesLength();var ay=Math.min(aw,av)*0.9;var e=(100-ad.getSectionsLength()*ay)/2;var az=(100-ad.getPagesLength()*ay)/2;ac.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+az+"%) scale("+ay/100+", "+ay/100+")"}else{}}function R(av){if(av){var ax=y;var aw=ad.getPageIndex();var e=50-(ax*aw.section)-(ax/2);var ay=50-(ax*aw.page)-(ax/2);ac.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+ay+"%) scale("+ax/100+", "+ax/100+")"}}Brav1Toolbox.addListener(window,"keydown",l);Brav1Toolbox.addListener(window,"keyup",g);function l(aw){var av=aw.target.tagName;if(av!="INPUT"&&av!="TEXTAREA"&&av!="SELECT"){if(aw.keyCode>=37&&aw.keyCode<=40){aw.preventDefault()}}}function g(ax){var av=ax.target.tagName;var aw;if(av!="INPUT"&&av!="TEXTAREA"&&av!="SELECT"){ax.preventDefault();switch(ax.keyCode){case 27:ao(true);break;case 37:z(ax.shiftKey);break;case 39:ah(ax.shiftKey);break;case 38:u(ax.shiftKey);break;case 40:G(ax.shiftKey);break;case 13:if(t){r(ad.getCurrentHilited())}break;default:break}}}function ah(e){var av=ad.getNextSection(e,au,t);if(av!=undefined){Z(av)}else{if(t&&am){A()}}}function z(e){var av=ad.getPrevSection(e,au,t);if(av!=undefined){Z(av)}else{if(t&&am){A()}}}function G(e){var av=ad.getNextPage(e,t);if(av!=undefined){Z(av)}else{if(t&&am){A()}}}function u(e){var av=ad.getPrevPage(e,t);if(av!=undefined){Z(av)}else{if(t&&am){A()}}}function r(){var av=r.arguments;if(av.length>0){if(av.length==1){if(Brav1Toolbox.typeOf(av[0])==="Object"){var az=av[0];var ay=az.page;var ax=az.subPage;if(ay!=null&&ay!=undefined){var e=document.querySelector(x+"[data-id="+D(ay)+"]");if(ax!=null&&ax!=undefined){var aw=e.querySelector(f+"[data-id="+D(ax)+"]");if(aw!=null){Z(aw);return}}}}else{if(av[0].nodeName!=undefined){Z(av[0],null,true)}}}else{if(Brav1Toolbox.typeOf(av[0])==="Number"||av[0]===0){var aw=ad.getPageByIndex(av[1],av[0]);Z(aw);return}}}}var ad=(function(){var a2;var aG;var aY;var aL;var aS=[];var aR=0;var be=0;var aZ=0;var a7=0;var aK=0;var a8=0;var aE=0;var aV;function aw(){aG=[];aY=document.querySelectorAll(aj);aL=[];a2=ac.querySelectorAll(".flowtime > "+x);for(var bi=0;bi<a2.length;bi++){var bg=[];var bl=a2[bi];aL[bi]=[];aS[bi]=[];if(bl.getAttribute("data-id")){bl.setAttribute("data-id","__"+bl.getAttribute("data-id"))}bl.setAttribute("data-prog","__"+(bi+1));bl.index=bi;bl.setAttribute("id","");var bf=bl.querySelectorAll(f);aZ+=bf.length;be=Math.max(be,bf.length);for(var bj=0;bj<bf.length;bj++){var bh=bf[bj];if(bh.getAttribute("data-id")){bh.setAttribute("data-id","__"+bh.getAttribute("data-id"))}bh.setAttribute("data-prog","__"+(bj+1));bh.index=bj;bh.setAttribute("id","");bg.push(bh);var bk=bh.querySelectorAll(aj);aL[bi][bj]=bk;aS[bi][bj]=-1}aG.push(bg)}aR=a2.length}function aA(bh,bg,bi){var bf=aK;if(bg==true&&aL[a7][aK].length>0&&aS[a7][aK]<aL[a7][aK].length-1&&bh!=true&&bi==false){aH(a7,aK)}else{bf=0;if(bh!=true||V==true||a7+1>aG.length-1){bf=aK}a7=Math.min(a7+1,aG.length-1);return aX(aG[a7],bf,bi)}return a3(aG[a7][aK],bi)}function a0(bh,bg,bi){var bf=aK;if(bg==true&&aL[a7][aK].length>0&&aS[a7][aK]>=0&&bh!=true&&bi==false){ba(a7,aK)}else{var bf=0;if(bh!=true||V==true||a7-1<0){bf=aK}a7=Math.max(a7-1,0);return aX(aG[a7],bf,bi)}return a3(aG[a7][aK],bi)}function aX(bj,bg,bi){var bh=bj[bg];if(bh==undefined){for(var bf=bg;bf>=0;bf--){if(bj[bf]!=undefined){bh=bj[bf];bg=bf;break}}}aK=bg;aT();return a3(bh,bi)}function av(bf,bg){if(aL[a7][aK].length>0&&aS[a7][aK]<aL[a7][aK].length-1&&bf!=true&&bg==false){aH(a7,aK)}else{if(aG[a7][aK+1]==undefined&&aG[a7+1]!=undefined){a7+=1;aK=0}else{aK=Math.min(aK+1,aG[a7].length-1)}}return a3(aG[a7][aK],bg)}function bb(bf,bg){if(aL[a7][aK].length>0&&aS[a7][aK]>=0&&bf!=true&&bg==false){ba(a7,aK)}else{if(aK==0&&aG[a7-1]!=undefined){a7-=1;aK=aG[a7].length-1}else{aK=Math.max(aK-1,0)}}return a3(aG[a7][aK],bg)}function a3(bf,bg){if(bg==true){ax(bf);return}else{return bf}}function aH(bf,bg,bh){if(bh!=undefined){aS[bf][bg]=bh}else{bh=aS[bf][bg]+=1}Brav1Toolbox.addClass(aL[bf][bg][bh],"revealed")}function ba(bf,bg,bh){if(bh!=undefined){aS[bf][bg]=bh}else{bh=aS[bf][bg]}Brav1Toolbox.removeClass(aL[bf][bg][bh],"revealed");Brav1Toolbox.removeClass(aL[bf][bg][bh],"revealed-temp");aS[bf][bg]-=1}function aC(){for(var bf=0;bf<aY.length;bf++){Brav1Toolbox.addClass(aY[bf],"revealed-temp")}}function aN(){for(var bf=0;bf<aY.length;bf++){Brav1Toolbox.removeClass(aY[bf],"revealed-temp")}}function aT(){for(var bj=0;bj<aL.length;bj++){var bg=aL[bj];for(var bh=0;bh<bg.length;bh++){var bf=bg[bh];if(bf.length>0){if(bj>a7){for(var bi=bf.length-1;bi>=0;bi--){ba(bj,bh,bi)}}else{if(bj<a7){for(var bi=0;bi<bf.length;bi++){aH(bj,bh,bi)}}else{if(bj==a7){if(bh>aK){for(var bi=bf.length-1;bi>=0;bi--){ba(bj,bh,bi)}}else{if(bh<aK){for(var bi=0;bi<bf.length;bi++){aH(bj,bh,bi)}}else{if(bh==aK){for(var bi=0;bi<bf.length;bi++){if(V==false){ba(bj,bh,bi)}else{if(al.section>ad.getPageIndex().section){aH(bj,bh,bi)}else{ba(bj,bh,bi)}}}if(V==false){aS[bj][bh]=-1}else{if(al.section>ad.getPageIndex().section){aS[bj][bh]=bi-1}else{aS[bj][bh]=-1}}}}}}}}}}}}function aJ(bf){if(bf){}return a7}function e(bf){if(bf){}return aK}function a6(){return a2}function aO(bf){return aG[bf]}function bd(){return aR}function aU(){return be}function aQ(){return aZ}function a1(bh){var bg=a7;var bf=aK;if(bh!=undefined){bg=bh.parentNode.index;bf=bh.index}return{section:bg,page:bf}}function a9(bf){return a2[bf]}function aM(bf,bg){return aG[bg][bf]}function aD(){return a2[a7]}function a4(){return aG[a7][aK]}function aP(){return a7<a2.length-1}function aB(){return a7>0}function aF(){return aK<aG[a7].length-1}function az(){return aK>0}function aW(){if(a7==0&&aK==0){return 0}var bg=0;for(var bf=0;bf<a7;bf++){bg+=aG[bf].length}bg+=aG[a7][aK].index+1;return bg}function a5(bi){if(bi!=undefined){aK=a1(bi).page;a7=a1(bi).section}var bh="";var bf=a2[a7];bh+=P(bf);if(aG[a7].length>1){var bg=aG[a7][aK];bh+="/"+P(bg)}return bh}function ay(bj){var bk=q(bj);if(bk){var bg=bk.parentNode;for(var bf=0;bf<aG.length;bf++){var bi=aG[bf];if(a2[bf]===bg){a7=bf;for(var bh=0;bh<bi.length;bh++){if(bi[bh]===bk){aK=bh;break}}}}aT()}return bk}function ax(bk,bf){for(var bg=0;bg<aG.length;bg++){var bi=aG[bg];for(var bh=0;bh<bi.length;bh++){var bj=aG[bg][bh];if(bj!==bk){Brav1Toolbox.removeClass(bj,"hilite");if(t==false&&bj!==a4()){Brav1Toolbox.removeClass(bj,"actual")}}}}Brav1Toolbox.addClass(bk,"hilite");if(bf){bc(bk)}aV=bk}function aI(){return aV}function bc(bf){Brav1Toolbox.addClass(bf,"actual")}aw();return{update:aw,updateFragments:aT,showFragments:aC,hideFragments:aN,getSection:aJ,getPage:e,getSections:a6,getPages:aO,getNextSection:aA,getPrevSection:a0,getNextPage:av,getPrevPage:bb,getSectionsLength:bd,getPagesLength:aU,getPagesTotalLength:aQ,getPageIndex:a1,getSectionByIndex:a9,getPageByIndex:aM,getCurrentSection:aD,getCurrentPage:a4,getProgress:aW,getHash:a5,setPage:ay,switchActivePage:ax,getCurrentHilited:aI,hasNextSection:aP,hasPrevSection:aB,hasNextPage:aF,hasPrevPage:az}})();function O(){if(ai&&T==null){s()}if(document.location.hash.length>0){an(null,true)}else{if(O.arguments.length>0){r.apply(this,O.arguments)}else{r(0,0);m()}}}function C(e){au=e;N(e)}function N(e){V=e}function ag(e){Q=e}function i(e){d=e;Z()}function p(e){am=e}function n(e){j=e}function I(e){ai=e;if(ai){if(T==null){s()}m()}else{if(T!=null){X()}}}return{start:O,updateNavigation:h,nextSection:ah,prevSection:z,next:G,prev:u,nextFragment:G,prevFragment:u,gotoPage:r,toggleOverview:ao,fragmentsOnSide:C,showFragmentsOnBack:N,useHistory:ag,slideWithPx:i,useOverviewVariant:p,twoStepsSlide:n,showProgress:I}})();