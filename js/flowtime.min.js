/*!
 * Flowtime.js
 * http://marcolago.com/absolide/flowtime/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Brav1Toolbox=(function(){var c=["","-webkit-","-moz-","-ms-","-o-"];var h;if(window.getComputedStyle){h=window.getComputedStyle(document.body)}else{h=document.documentElement.style}function j(l,n,m,k){if(l.addEventListener){l.addEventListener(n,m,k)}else{if(l.attachEvent){l.attachEvent(n,m)}}}function f(k){return i(k)!=""}function i(n){for(var k=0;k<c.length;k++){var m=c[k].replace(/-/g,"");var l=n;if(m.length>0){l=l.charAt(0).toUpperCase()+l.substr(1)}l=m+l;if(l in h==true){return l}}return""}function d(k){return !!k&&Object.prototype.toString.call(k).match(/(\w+)\]/)[1]}function g(l,m){if(l.classList){l.classList.add(m)}else{if(e(l,m)==false){var k=l.className;if(k.length>0){k+=" "}l.className=k+m}}}function a(l,m){if(l.classList){l.classList.remove(m)}else{var k=l.className;if(k.indexOf(m)!=-1){if(k.indexOf(" "+m)!=-1){k=k.replace(" "+m,"")}else{if(k.indexOf(m+" ")!=-1){k=k.replace(m+" ","")}else{k=k.replace(m,"")}}}l.className=k}}function e(k,l){if(k.classList){return k.classList.contains(l)}else{return k.className.indexOf(l)!=-1}}function b(k,n){var m=document.createEvent("HTMLEvents");m.initEvent(k,true,true);for(var l in n){m[l]=n[l]}document.dispatchEvent(m)}return{addListener:j,dispatchEvent:b,testCSS:f,getPrefixed:i,typeOf:d,addClass:g,removeClass:a,hasClass:e}})();
var Flowtime=(function(){var E="ontouchstart" in document.documentElement;var H=window.history.pushState;var y="page";var d="."+y;var Q="sub-page";var ac="."+Q;var V="fragment";var ab="."+V;var aa=document.querySelector(".page-container");var A=document.querySelector("body");var W=false;var a="";var q=false;var T=document.title;var ag;var u=22;var L=null;var ai=false;var N=false;var c=false;var ad=false;var i=false;var Y=false;Brav1Toolbox.addClass(A,"ft-absolute-nav");if(!E){Brav1Toolbox.addListener(document,"click",O,false)}function O(ao){var ak=ao.target.getAttribute("href");if(ak&&ak.substr(0,1)=="#"){ao.preventDefault();var an=ak;var al=U.setPage(an);S(al,null,true)}if(q&&Brav1Toolbox.hasClass(ao.target,Q)){S(ao.target,null,true)}if(Brav1Toolbox.hasClass(ao.target,"sub-page-thumb")){var am=Number(R(ao.target.getAttribute("data-p")));var aj=Number(R(ao.target.getAttribute("data-sp")));o(am,aj)}}if(W==false){window.onpopstate=b}function b(al){W=false;if(al.state){var ak=al.state.token.replace("#/","");var aj=U.setPage(ak);S(aj,false)}else{}}Brav1Toolbox.addListener(window,"hashchange",ae);function ae(al,am){if(W||am){var ak=document.location.hash.replace("#/","");var aj=U.setPage(ak);S(aj,false)}}var t=(function C(){var am=NaN;function ak(){aj();if(!q){am=setTimeout(al,300)}}function aj(){clearTimeout(am)}function al(){ae(null,true)}Brav1Toolbox.addListener(window,"resize",ak);return{enable:ak,disable:aj,}})();function n(ak){if(ak.length>0){var aj=ak.replace("#/","").split("/");var am=document.querySelector(".page[data-id=__"+aj[0]+"]")||document.querySelector(".page[data-prog=__"+aj[0]+"]");if(am!=null){var al=null;if(aj.length>1){al=am.querySelector(ac+"[data-id=__"+aj[1]+"]")||am.querySelector(ac+"[data-prog=__"+aj[1]+"]")}if(al==null){al=am.querySelector(ac)}return al}}return}function f(){U.update();ae(null,true)}function D(an){var am=T;var aj=U.getCurrentSubPage().getAttribute("data-title");if(aj==null){var al=an.split("/");for(var ak=0;ak<al.length;ak++){am+=" | "+al[ak]}}else{if(U.getCurrentPage().getAttribute("data-title")!=null){am+=" | "+U.getCurrentPage().getAttribute("data-title")}am+=" | "+aj}document.title=am}function I(aj){return(aj.getAttribute("data-id")!=null?aj.getAttribute("data-id").replace(/__/,""):aj.getAttribute("data-prog").replace(/__/,""))}function x(aj){if(aj.substr(0,2)!="__"){return"__"+aj}else{return aj}}function R(aj){if(aj.substr(0,2)=="__"){return aj.replace(/__/,"")}else{return aj}}function S(ar,ao,ak){ao=ao==false?ao:true;if(!ar){if(U.getCurrentSubPage()!=null){ar=U.getCurrentSubPage()}else{ar=document.querySelector(ac)}ao=true}var aq;var ap;var al=U.getPageIndex(ar);if(c==true){aq=ar.offsetLeft+ar.parentNode.offsetLeft;ap=ar.offsetTop+ar.parentNode.offsetTop}else{aq=al.page;ap=al.subPage}ah(aq,ap);var am=U.getHash(ar);if(ak==true){U.updateFragments()}if(H&&ao!=false){var aj={token:am};var an="#/"+am;if(an!=a){a=an;window.history.pushState(aj,null,a)}}else{document.location.hash="/"+am}D(am);if(q){K()}U.switchActiveSubPage(U.getCurrentSubPage(),true);Brav1Toolbox.dispatchEvent("flowtimenavigation",{page:U.getCurrentPage(),subPage:U.getCurrentSubPage(),pageIndex:al.page,subPageIndex:al.subPage,prevPage:U.hasPrevPage(),nextPage:U.hasNextPage(),prev:U.hasPrevSubPage(),next:U.hasNextSubPage(),progress:U.getProgress(),total:U.getSubPagesTotalLength()});if(Y){k()}}function ah(aj,ak){if(Brav1Toolbox.testCSS("transform")){if(c){aa.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-aj+"px) translateY("+-ak+"px)"}else{aa.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+-aj*100+"%) translateY("+-ak*100+"%)"}}else{if(c){aa.style.top=-ak+"px";aa.style.left=-aj+"px"}else{aa.style.top=-ak*100+"%";aa.style.left=-aj*100+"%"}}}var L=null;var s=null;function p(){var ak=document.createDocumentFragment();L=document.createElement("div");L.className="ft-default-progress";ak.appendChild(L);for(var am=0;am<U.getPagesLength();am++){var aj=document.createElement("div");aj.className="page-thumb";var al=U.getSubPages(am);for(var an=0;an<al.length;an++){var ao=document.createElement("div");ao.className="sub-page-thumb";ao.setAttribute("data-p","__"+am);ao.setAttribute("data-sp","__"+an);aj.appendChild(ao)}L.appendChild(aj)}A.appendChild(L)}function P(){if(L!=null){A.removeChild(L);L=null}}function k(){if(L!=null){var am=document.querySelectorAll(".ft-default-progress .sub-page-thumb");for(var al=0;al<am.length;al++){var an=am[al];var ak=Number(R(an.getAttribute("data-p")));var aj=Number(R(an.getAttribute("data-sp")));if(ak==U.getPageIndex().page&&aj==U.getPageIndex().subPage){Brav1Toolbox.addClass(am[al],"actual")}else{Brav1Toolbox.removeClass(am[al],"actual")}}}}function af(aj){if(q){K(aj)}else{ag=U.getCurrentSubPage();v()}}function K(aj){q=false;Brav1Toolbox.removeClass(A,"ft-overview");U.hideFragments();if(aj==true){S(ag)}else{S()}}function v(){q=true;Brav1Toolbox.addClass(A,"ft-overview");U.showFragments();if(ad==false){M(true)}else{J(true)}}function M(am){if(am){var al=100/U.getPagesLength();var ak=100/U.getSubPagesLength();var an=Math.min(al,ak)*0.9;var aj=(100-U.getPagesLength()*an)/2;var ao=(100-U.getSubPagesLength()*an)/2;aa.style[Brav1Toolbox.getPrefixed("transform")]="translate("+aj+"%, "+ao+"%) scale("+an/100+", "+an/100+")"}else{}}function J(ak){if(ak){var am=u;var al=U.getPageIndex();var aj=50-(am*al.page)-(am/2);var an=50-(am*al.subPage)-(am/2);aa.style[Brav1Toolbox.getPrefixed("transform")]="translate("+aj+"%, "+an+"%) scale("+am/100+", "+am/100+")"}}Brav1Toolbox.addListener(window,"keydown",j);Brav1Toolbox.addListener(window,"keyup",e);function j(ak){var aj=ak.target.tagName;if(aj!="INPUT"&&aj!="TEXTAREA"&&aj!="SELECT"){if(ak.keyCode>=37&&ak.keyCode<=40){ak.preventDefault()}}}function e(al){var aj=al.target.tagName;var ak;if(aj!="INPUT"&&aj!="TEXTAREA"&&aj!="SELECT"){al.preventDefault();switch(al.keyCode){case 27:af(true);break;case 37:r(al.shiftKey);break;case 39:z(al.shiftKey);break;case 38:Z(al.shiftKey);break;case 40:g(al.shiftKey);break;case 13:if(q){o(U.getCurrentHilited())}break;default:break}}}function z(aj){var ak=U.getNextPage(aj,ai,q);if(ak!=undefined){S(ak)}else{if(q&&ad){v()}}}function r(aj){var ak=U.getPrevPage(aj,ai,q);if(ak!=undefined){S(ak)}else{if(q&&ad){v()}}}function g(aj){var ak=U.getNextSubPage(aj,q);if(ak!=undefined){S(ak)}else{if(q&&ad){v()}}}function Z(aj){var ak=U.getPrevSubPage(aj,q);if(ak!=undefined){S(ak)}else{if(q&&ad){v()}}}function o(){var ak=o.arguments;if(ak.length>0){if(ak.length==1){if(Brav1Toolbox.typeOf(ak[0])==="Object"){var ao=ak[0];var an=ao.page;var am=ao.subPage;if(an!=null&&an!=undefined){var aj=document.querySelector(".page[data-id="+x(an)+"]");if(am!=null&&am!=undefined){var al=aj.querySelector(ac+"[data-id="+x(am)+"]");if(al!=null){S(al);return}}}}else{if(ak[0].nodeName!=undefined){S(ak[0],null,true)}}}else{if(Brav1Toolbox.typeOf(ak[0])==="Number"||ak[0]===0){var al=U.getSubPageByIndex(ak[1],ak[0]);S(al);return}}}}var U=(function(){var ao;var at;var aN;var aA;var aH=[];var a3=0;var aO=0;var aY=0;var aW=0;var az=0;var aX=0;var ar=0;var aL;function al(){at=[];aN=document.querySelectorAll(ab);aA=[];ao=aa.querySelectorAll(".page-container > "+d);for(var a8=0;a8<ao.length;a8++){var a7=[];var ba=ao[a8];aA[a8]=[];aH[a8]=[];if(ba.getAttribute("data-id")){ba.setAttribute("data-id","__"+ba.getAttribute("data-id"))}ba.setAttribute("data-prog","__"+(a8+1));ba.index=a8;var a5=ba.querySelectorAll(ac);aY+=a5.length;aO=Math.max(aO,a5.length);for(var a9=0;a9<a5.length;a9++){var a6=a5[a9];if(a6.getAttribute("data-id")){a6.setAttribute("data-id","__"+a6.getAttribute("data-id"))}a6.setAttribute("data-prog","__"+(a9+1));a6.index=a9;a7.push(a6);var bb=a6.querySelectorAll(ab);aA[a8][a9]=bb;aH[a8][a9]=-1}at.push(a7)}a3=ao.length}function ak(a7,a6,a8){var a5=az;if(a6==true&&aA[aW][az].length>0&&aH[aW][az]<aA[aW][az].length-1&&a7!=true&&a8==false){aw(aW,az)}else{a5=0;if(a7!=true||N==true||aW+1>at.length-1){a5=az}aW=Math.min(aW+1,at.length-1);return ay(at[aW],a5,a8)}return aS(at[aW][az],a8)}function a1(a7,a6,a8){var a5=az;if(a6==true&&aA[aW][az].length>0&&aH[aW][az]>=0&&a7!=true&&a8==false){aZ(aW,az)}else{var a5=0;if(a7!=true||N==true||aW-1<0){a5=az}aW=Math.max(aW-1,0);return ay(at[aW],a5,a8)}return aS(at[aW][az],a8)}function ay(a9,a6,a8){var a7=a9[a6];if(a7==undefined){for(var a5=a6;a5>=0;a5--){if(a9[a5]!=undefined){a7=a9[a5];a6=a5;break}}}az=a6;aI();return aS(a7,a8)}function aF(a5,a6){if(aA[aW][az].length>0&&aH[aW][az]<aA[aW][az].length-1&&a5!=true&&a6==false){aw(aW,az)}else{if(at[aW][az+1]==undefined&&at[aW+1]!=undefined){aW+=1;az=0}else{az=Math.min(az+1,at[aW].length-1)}}return aS(at[aW][az],a6)}function ap(a5,a6){if(aA[aW][az].length>0&&aH[aW][az]>=0&&a5!=true&&a6==false){aZ(aW,az)}else{if(az==0&&at[aW-1]!=undefined){aW-=1;az=at[aW].length-1}else{az=Math.max(az-1,0)}}return aS(at[aW][az],a6)}function aS(a5,a6){if(a6==true){aV(a5);return}else{return a5}}function aw(a5,a6,a7){if(a7!=undefined){aH[a5][a6]=a7}else{a7=aH[a5][a6]+=1}Brav1Toolbox.addClass(aA[a5][a6][a7],"revealed")}function aZ(a5,a6,a7){if(a7!=undefined){aH[a5][a6]=a7}else{a7=aH[a5][a6]}Brav1Toolbox.removeClass(aA[a5][a6][a7],"revealed");aH[a5][a6]-=1}function aq(){for(var a5=0;a5<aN.length;a5++){Brav1Toolbox.addClass(aN[a5],"revealed-temp")}}function aC(){for(var a5=0;a5<aN.length;a5++){Brav1Toolbox.removeClass(aN[a5],"revealed-temp")}}function aI(){for(var a9=0;a9<aA.length;a9++){var a6=aA[a9];for(var a7=0;a7<a6.length;a7++){var a5=a6[a7];if(a5.length>0){if(a9>aW){for(var a8=a5.length-1;a8>=0;a8--){aZ(a9,a7,a8)}}else{if(a9<aW){for(var a8=0;a8<a5.length;a8++){aw(a9,a7,a8)}}else{if(a9==aW){if(a7>az){for(var a8=a5.length-1;a8>=0;a8--){aZ(a9,a7,a8)}}else{if(a7<az){for(var a8=0;a8<a5.length;a8++){aw(a9,a7,a8)}}else{if(a7==az){for(var a8=0;a8<a5.length;a8++){if(N==false){aZ(a9,a7,a8)}else{aq(a9,a7,a8)}}if(N==false){aH[a9][a7]=-1}else{aH[a9][a7]=a8-1}}}}}}}}}}}function aj(a5){if(a5){}return aW}function aP(a5){if(a5){}return az}function aE(){return ao}function aR(a5){return at[a5]}function aK(){return a3}function au(){return aO}function aD(){return aY}function aQ(a7){var a6=aW;var a5=az;if(a7!=undefined){a6=a7.parentNode.index;a5=a7.index}return{page:a6,subPage:a5}}function aB(a5){return ao[a5]}function a4(a5,a6){return at[a6][a5]}function aT(){return ao[aW]}function aJ(){return at[aW][az]}function av(){return aW<ao.length-1}function an(){return aW>0}function a0(){return az<at[aW].length-1}function aG(){return az>0}function aM(){if(aW==0&&az==0){return 0}var a6=0;for(var a5=0;a5<aW;a5++){a6+=at[a5].length}a6+=at[aW][az].index+1;return a6}function aU(a8){if(a8!=undefined){az=aQ(a8).subPage;aW=aQ(a8).page}var a7="";var a5=ao[aW];a7+=I(a5);if(at[aW].length>1){var a6=at[aW][az];a7+="/"+I(a6)}return a7}function am(a9){var ba=n(a9);if(ba){var a6=ba.parentNode;for(var a5=0;a5<at.length;a5++){var a8=at[a5];if(ao[a5]===a6){aW=a5;for(var a7=0;a7<a8.length;a7++){if(a8[a7]===ba){az=a7;break}}}}aI()}return ba}function aV(ba,a5){for(var a6=0;a6<at.length;a6++){var a8=at[a6];for(var a7=0;a7<a8.length;a7++){var a9=at[a6][a7];if(a9!==ba){Brav1Toolbox.removeClass(a9,"hilite");if(q==false&&a9!==aJ()){Brav1Toolbox.removeClass(a9,"actual")}}}}Brav1Toolbox.addClass(ba,"hilite");if(a5){a2(ba)}aL=ba}function ax(){return aL}function a2(a5){Brav1Toolbox.addClass(a5,"actual")}al();return{update:al,updateFragments:aI,showFragments:aq,hideFragments:aC,getPage:aj,getSubPage:aP,getPages:aE,getSubPages:aR,getNextPage:ak,getPrevPage:a1,getNextSubPage:aF,getPrevSubPage:ap,getPagesLength:aK,getSubPagesLength:au,getSubPagesTotalLength:aD,getPageIndex:aQ,getPageByIndex:aB,getSubPageByIndex:a4,getCurrentPage:aT,getCurrentSubPage:aJ,getProgress:aM,getHash:aU,setPage:am,switchActiveSubPage:aV,getCurrentHilited:ax,hasNextPage:av,hasPrevPage:an,hasNextSubPage:a0,hasPrevSubPage:aG}})();function G(){if(Y&&L==null){p()}if(document.location.hash.length>0){ae(null,true)}else{if(G.arguments.length>0){o.apply(this,G.arguments)}else{o(0,0);k()}}}function w(aj){ai=aj;F(aj)}function F(aj){N=aj}function X(aj){H=aj}function h(aj){c=aj;S()}function m(aj){ad=aj}function l(aj){i=aj}function B(aj){Y=aj;if(Y){if(L==null){p()}k()}else{if(L!=null){P()}}}return{start:G,updateNavigation:f,nextPage:z,prevPage:r,next:g,prev:Z,nextFragment:g,prevFragment:Z,gotoPage:o,toggleOverview:af,fragmentsOnSide:w,showFragmentsOnBack:F,useHistory:X,slideWithPx:h,useOverviewVariant:m,twoStepsSlide:l,showProgress:B}})();